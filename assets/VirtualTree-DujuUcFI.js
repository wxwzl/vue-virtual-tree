import{n as ze,p as st,k as rt,l as nt,m as he,o as F,q as lt,s as ot,x as Pe,y as at,w as dt,c as J,f as ve,e as Fe,z as U,h as Z,F as Be,g as ct,A as Ke,B as Ue,C as ut,D as Ee,E as Se,G as ht,H as ft,I as vt,d as He,r as Q,J as ue,a as H,b as pt,t as gt,K as me,u as ce}from"./index-C5HEtDEh.js";function mt(){var e=window.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);var t=e.indexOf("Trident/");if(t>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):-1}let ye;function Ie(){Ie.init||(Ie.init=!0,ye=mt()!==-1)}var ke={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ie(),ze(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",ye&&this.$el.appendChild(e),e.data="about:blank",ye||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!ye&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const yt=nt();st("data-v-b329ee4c");const bt={class:"resize-observer",tabindex:"-1"};rt();const St=yt((e,i,t,s,r,h)=>(F(),he("div",bt)));ke.render=St;ke.__scopeId="data-v-b329ee4c";ke.__file="src/components/ResizeObserver.vue";function be(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?be=function(i){return typeof i}:be=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},be(e)}function zt(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function kt(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function $t(e,i,t){return i&&kt(e.prototype,i),e}function Le(e){return wt(e)||Dt(e)||_t(e)||Ct()}function wt(e){if(Array.isArray(e))return xe(e)}function Dt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _t(e,i){if(e){if(typeof e=="string")return xe(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xe(e,i)}}function xe(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,s=new Array(i);t<i;t++)s[t]=e[t];return s}function Ct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function It(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function xt(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,r,h,d=function(v){for(var g=arguments.length,$=new Array(g>1?g-1:0),x=1;x<g;x++)$[x-1]=arguments[x];if(h=$,!(s&&v===r)){var w=t.leading;typeof w=="function"&&(w=w(v,r)),(!s||v!==r)&&w&&e.apply(void 0,[v].concat(Le(h))),r=v,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[v].concat(Le(h))),s=0},i)}};return d._clear=function(){clearTimeout(s),s=null},d}function We(e,i){if(e===i)return!0;if(be(e)==="object"){for(var t in e)if(!We(e[t],i[t]))return!1;return!0}return!1}var Nt=function(){function e(i,t,s){zt(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(t,s)}return $t(e,[{key:"createObserver",value:function(t,s){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=It(t),this.callback=function(p,v){r.options.callback(p,v),p&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var h=this.options.throttleOptions||{},d=h.leading;this.callback=xt(this.callback,this.options.throttle,{leading:function(v){return d==="both"||d==="visible"&&v||d==="hidden"&&!v}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(p){var v=p[0];if(p.length>1){var g=p.find(function(x){return x.isIntersecting});g&&(v=g)}if(r.callback){var $=v.isIntersecting&&v.intersectionRatio>=r.threshold;if($===r.oldResult)return;r.oldResult=$,r.callback($,v)}},this.options.intersection),ze(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function je(e,i,t){var s=i.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Nt(e,s,t);e._vue_visibilityState=r}}function Tt(e,i,t){var s=i.value,r=i.oldValue;if(!We(s,r)){var h=e._vue_visibilityState;if(!s){qe(e);return}h?h.createObserver(s,t):je(e,{value:s},t)}}function qe(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var Et={beforeMount:je,updated:Tt,unmounted:qe};function Ot(e){return{all:e=e||new Map,on:function(i,t){var s=e.get(i);s&&s.push(t)||e.set(i,[t])},off:function(i,t){var s=e.get(i);s&&s.splice(s.indexOf(t)>>>0,1)},emit:function(i,t){(e.get(i)||[]).slice().map(function(s){s(t)}),(e.get("*")||[]).slice().map(function(s){s(i,t)})}}}var At={itemsLimit:1e3},Vt=/(auto|scroll)/;function Ye(e,i){return e.parentNode===null?i:Ye(e.parentNode,i.concat([e]))}var _e=function(i,t){return getComputedStyle(i,null).getPropertyValue(t)},Rt=function(i){return _e(i,"overflow")+_e(i,"overflow-y")+_e(i,"overflow-x")},Kt=function(i){return Vt.test(Rt(i))};function Me(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=Ye(e.parentNode,[]),t=0;t<i.length;t+=1)if(Kt(i[t]))return i[t];return document.scrollingElement||document.documentElement}}function Ne(e){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ne(e)}var Ge={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(i){return["vertical","horizontal"].includes(i)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Xe(){return this.items.length&&Ne(this.items[0])!=="object"}var Te=!1;if(typeof window<"u"){Te=!1;try{var Lt=Object.defineProperty({},"passive",{get:function(){Te=!0}});window.addEventListener("test",null,Lt)}catch{}}let Mt=0;var Oe={name:"RecycleScroller",components:{ResizeObserver:ke},directives:{ObserveVisibility:Et},props:{...Ge,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},i=this.items,t=this.sizeField,s=this.minItemSize;let r=1e4,h=0,d;for(let p=0,v=i.length;p<v;p++)d=i[p][t]||s,d<r&&(r=d),h+=d,e[p]={accumulator:h,size:d};return this.$_computedMinItemSize=r,e}return[]},simpleArray:Xe,itemIndexByKey(){const{keyField:e,items:i}=this,t={};for(let s=0,r=i.length;s<r;s++)t[i[s][e]]=s;return t}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,i,t,s,r){const h=lt({id:Mt++,index:i,used:!0,key:s,type:r}),d=ot({item:t,position:0,nr:h});return e.push(d),d},unuseView(e,i=!1){const t=this.$_unusedViews,s=e.nr.type;let r=t.get(s);r||(r=[],t.set(s,r)),r.push(e),i||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const i=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:t}=this.updateVisibleItems(!1,!0);t||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});i(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&i()},this.updateInterval))}},handleVisibilityChange(e,i){this.ready&&(e||i.boundingClientRect.width!==0||i.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,i=!1){const t=this.itemSize,s=this.gridItems||1,r=this.itemSecondarySize||t,h=this.$_computedMinItemSize,d=this.typeField,p=this.simpleArray?null:this.keyField,v=this.items,g=v.length,$=this.sizes,x=this.$_views,w=this.$_unusedViews,c=this.pool,m=this.itemIndexByKey;let o,b,L,N,u;if(!g)o=b=N=u=L=0;else if(this.$_prerender)o=N=0,b=u=Math.min(this.prerender,v.length),L=null;else{const S=this.getScroll();if(i){let T=S.start-this.$_lastUpdateScrollPosition;if(T<0&&(T=-T),t===null&&T<h||T<t)return{continuous:!0}}this.$_lastUpdateScrollPosition=S.start;const K=this.buffer;S.start-=K,S.end+=K;let O=0;if(this.$refs.before&&(O=this.$refs.before.scrollHeight,S.start-=O),this.$refs.after){const T=this.$refs.after.scrollHeight;S.end+=T}if(t===null){let T,ee=0,W=g-1,M=~~(g/2),te;do te=M,T=$[M].accumulator,T<S.start?ee=M:M<g-1&&$[M+1].accumulator>S.start&&(W=M),M=~~((ee+W)/2);while(M!==te);for(M<0&&(M=0),o=M,L=$[g-1].accumulator,b=M;b<g&&$[b].accumulator<S.end;b++);for(b===-1?b=v.length-1:(b++,b>g&&(b=g)),N=o;N<g&&O+$[N].accumulator<S.start;N++);for(u=N;u<g&&O+$[u].accumulator<S.end;u++);}else{o=~~(S.start/t*s);const T=o%s;o-=T,b=Math.ceil(S.end/t*s),N=Math.max(0,Math.floor((S.start-O)/t*s)),u=Math.floor((S.end-O)/t*s),o<0&&(o=0),b>g&&(b=g),N<0&&(N=0),u>g&&(u=g),L=Math.ceil(g/s)*t}}b-o>At.itemsLimit&&this.itemsLimitError(),this.totalSize=L;let a;const z=o<=this.$_endIndex&&b>=this.$_startIndex;if(z)for(let S=0,K=c.length;S<K;S++)a=c[S],a.nr.used&&(e&&(a.nr.index=m[a.item[p]]),(a.nr.index==null||a.nr.index<o||a.nr.index>=b)&&this.unuseView(a));const D=z?null:new Map;let y,C,I;for(let S=o;S<b;S++){y=v[S];const K=p?y[p]:y;if(K==null)throw new Error(`Key is ${K} on item (keyField is '${p}')`);if(a=x.get(K),!t&&!$[S].size){a&&this.unuseView(a);continue}C=y[d];let O=w.get(C),T=!1;if(!a)z?O&&O.length?a=O.pop():a=this.addView(c,S,y,K,C):(I=D.get(C)||0,(!O||I>=O.length)&&(a=this.addView(c,S,y,K,C),this.unuseView(a,!0),O=w.get(C)),a=O[I],D.set(C,I+1)),x.delete(a.nr.key),a.nr.used=!0,a.nr.index=S,a.nr.key=K,a.nr.type=C,x.set(K,a),T=!0;else if(!a.nr.used&&(a.nr.used=!0,T=!0,O)){const ee=O.indexOf(a);ee!==-1&&O.splice(ee,1)}a.item=y,T&&(S===v.length-1&&this.$emit("scroll-end"),S===0&&this.$emit("scroll-start")),t===null?(a.position=$[S-1].accumulator,a.offset=0):(a.position=Math.floor(S/s)*t,a.offset=S%s*r)}return this.$_startIndex=o,this.$_endIndex=b,this.emitUpdate&&this.$emit("update",o,b,N,u),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:z}},getListenerTarget(){let e=Me(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:i}=this,t=i==="vertical";let s;if(this.pageMode){const r=e.getBoundingClientRect(),h=t?r.height:r.width;let d=-(t?r.top:r.left),p=t?window.innerHeight:window.innerWidth;d<0&&(p+=d,d=0),d+p>h&&(p=h-d),s={start:d,end:d+p}}else t?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Te?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let i;const t=this.gridItems||1;this.itemSize===null?i=e>0?this.sizes[e-1].accumulator:0:i=Math.floor(e/t)*this.itemSize,this.scrollToPosition(i)},scrollToPosition(e){const i=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let t,s,r;if(this.pageMode){const h=Me(this.$el),d=h.tagName==="HTML"?0:h[i.scroll],p=h.getBoundingClientRect(),g=this.$el.getBoundingClientRect()[i.start]-p[i.start];t=h,s=i.scroll,r=e+d+g}else t=this.$el,s=i.scroll,r=e;t[s]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,i)=>e.nr.index-i.nr.index)}}};const Pt={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Ft={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Bt(e,i,t,s,r,h){const d=Pe("ResizeObserver"),p=at("observe-visibility");return dt((F(),J("div",{class:Se(["vue-recycle-scroller",{ready:r.ready,"page-mode":t.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:i[0]||(i[0]=(...v)=>h.handleScroll&&h.handleScroll(...v))},[e.$slots.before?(F(),J("div",Pt,[U(e.$slots,"before")],512)):ve("v-if",!0),(F(),he(Ke(t.listTag),{ref:"wrapper",style:Ee({[e.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:Se(["vue-recycle-scroller__item-wrapper",t.listClass])},{default:Z(()=>[(F(!0),J(Be,null,ct(r.pool,v=>(F(),he(Ke(t.itemTag),Ue({key:v.nr.id,style:r.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${v.position}px) translate${e.direction==="vertical"?"X":"Y"}(${v.offset}px)`,width:t.gridItems?`${e.direction==="vertical"&&t.itemSecondarySize||t.itemSize}px`:void 0,height:t.gridItems?`${e.direction==="horizontal"&&t.itemSecondarySize||t.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[t.itemClass,{hover:!t.skipHover&&r.hoverKey===v.nr.key}]]},ut(t.skipHover?{}:{mouseenter:()=>{r.hoverKey=v.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:Z(()=>[U(e.$slots,"default",{item:v.item,index:v.nr.index,active:v.nr.used})]),_:2},1040,["style","class"]))),128)),U(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(F(),J("div",Ft,[U(e.$slots,"after")],512)):ve("v-if",!0),Fe(d,{onNotify:h.handleResize},null,8,["onNotify"])],34)),[[p,h.handleVisibilityChange]])}Oe.render=Bt;Oe.__file="src/components/RecycleScroller.vue";var Ae={name:"DynamicScroller",components:{RecycleScroller:Oe},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const i of e)if(i.target&&i.target.$_vs_onResize){let t,s;if(i.borderBoxSize){const r=i.borderBoxSize[0];t=r.inlineSize,s=r.blockSize}else t=i.contentRect.width,s=i.contentRect.height;i.target.$_vs_onResize(i.target.$_vs_id,t,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Ge,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:Xe,itemsWithSize(){const e=[],{items:i,keyField:t,simpleArray:s}=this,r=this.vscrollData.sizes,h=i.length;for(let d=0;d<h;d++){const p=i[d],v=s?d:p[t];let g=r[v];typeof g>"u"&&!this.$_undefinedMap[v]&&(g=0),e.push({item:p,id:v,size:g})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,i){const t=this.$el.scrollTop;let s=0,r=0;const h=Math.min(e.length,i.length);for(let p=0;p<h&&!(s>=t);p++)s+=i[p].size||this.minItemSize,r+=e[p].size||this.minItemSize;const d=r-s;d!==0&&(this.$el.scrollTop+=d)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=Ot()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const i=this.$refs.scroller;i&&i.scrollToItem(e)},getItemSize(e,i=void 0){const t=this.simpleArray?i??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[t]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const i=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(i)})};requestAnimationFrame(i)})}}};function Ut(e,i,t,s,r,h){const d=Pe("RecycleScroller");return F(),he(d,Ue({ref:"scroller",items:h.itemsWithSize,"min-item-size":t.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:h.onScrollerResize,onVisible:h.onScrollerVisible}),{default:Z(({item:p,index:v,active:g})=>[U(e.$slots,"default",ht(ft({item:p.item,index:v,active:g,itemWithSize:p})))]),before:Z(()=>[U(e.$slots,"before")]),after:Z(()=>[U(e.$slots,"after")]),empty:Z(()=>[U(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Ae.render=Ut;Ae.__file="src/components/DynamicScroller.vue";var Je={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,i){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const t=this.vscrollData.sizes[i],s=this.vscrollData.sizes[e];t!=null&&t!==s&&this.applySize(t)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const i=this.$el.offsetWidth,t=this.$el.offsetHeight;this.applyWidthHeight(i,t)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,i){const t=~~(this.vscrollParent.direction==="vertical"?i:e);t&&this.size!==t&&this.applySize(t)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,i,t){this.id===e&&this.applyWidthHeight(i,t)}},render(){return vt(this.tag,this.$slots.default())}};Je.__file="src/components/DynamicScrollerItem.vue";const pe={id:"id",children:"children",label:"label",disabled:"disabled",isLeaf:"isLeaf"};function q(e,i={}){const t={...pe,...i};return e[t.id]??e.id??""}function Ve(e,i={}){const t={...pe,...i};return e[t.label]??e.label??""}function re(e,i={}){const t={...pe,...i};return e[t.children]??e.children??[]}function Ht(e,i={}){const t={...pe,...i};return e[t.disabled]??e.disabled??!1}function fe(e,i={}){const t={...pe,...i};return re(e,i).length>0?!1:e[t.isLeaf]!==void 0?e[t.isLeaf]??!1:!0}function Qe(e,i,t=null,s={}){for(const r of e){if(i(r,t)===!1)continue;const d=re(r,s);d.length>0&&Qe(d,i,r,s)}}function Ze(e,i,t={}){for(const s of e){if(i(s))return s;const r=re(s,t);if(r.length>0){const h=Ze(r,i,t);if(h)return h}}return null}function Ce(e,i,t={}){return Ze(e,s=>q(s,t)===i,t)}function Wt(e,i={}){const t=[];return Qe(e,s=>{t.push(q(s,i))},null,i),t}const jt=["draggable","data-node-id"],qt={class:"vue-virtual-tree-node__content"},Yt={key:0},Gt={key:0,class:"vue-virtual-tree-node__checkbox"},Xt=["checked","indeterminate","disabled"],Jt={class:"vue-virtual-tree-node__label"},Qt=He({__name:"TreeNode",props:{node:{},props:{},showCheckbox:{type:Boolean},expandOnClickNode:{type:Boolean},draggable:{type:Boolean},currentKey:{},dropType:{},indent:{type:[Number,Function]}},emits:["drag-start","drag-enter","drag-leave","drag-over","drag-end","drop"],setup(e,{emit:i}){const t=e,s=i,r=Q(!1),h=ue(()=>Ve(t.node.data,t.props)),d=ue(()=>fe(t.node.data,t.props)),p=ue(()=>t.currentKey!==null&&t.currentKey!==void 0&&t.currentKey===t.node.id),v=ue(()=>{const o=t.indent;if(typeof o=="function")try{return o(t.node)??18}catch{return 18}return o??18}),g=o=>{t.node.isDisabled||!t.draggable||(r.value=!0,s("drag-start",t.node,o))},$=o=>{t.draggable&&s("drag-enter",t.node,o)},x=o=>{t.draggable&&s("drag-leave",t.node,o)},w=o=>{t.draggable&&s("drag-over",t.node,o)},c=o=>{r.value=!1,s("drag-end",t.node,o)},m=o=>{t.draggable&&s("drop",t.node,o)};return(o,b)=>(F(),J("div",{class:Se(["vue-virtual-tree-node",{"is-expanded":e.node.isExpanded,"is-checked":e.node.isChecked,"is-disabled":e.node.isDisabled,"is-leaf":d.value,"is-loading":e.node.isLoading,"is-dragging":r.value,"is-current":p.value,[`drop-${e.dropType}`]:e.dropType}]),style:Ee({paddingLeft:`${e.node.level*v.value}px`}),draggable:e.draggable&&!e.node.isDisabled,"data-node-id":e.node.id,onDragstart:g,onDragenter:$,onDragleave:x,onDragover:w,onDragend:c,onDrop:m},[H("div",qt,[H("span",{class:Se(["vue-virtual-tree-node__expand-icon",{"is-leaf":d.value,"is-loading":e.node.isLoading}])},[e.node.isLoading?(F(),J("span",Yt,[U(o.$slots,"loading",{node:e.node,data:e.node.data},void 0,!0)])):U(o.$slots,"icon",{key:1,node:e.node,data:e.node.data},void 0,!0)],2),e.showCheckbox?(F(),J("span",Gt,[H("input",{type:"checkbox",checked:e.node.isChecked,indeterminate:e.node.isIndeterminate,disabled:e.node.isDisabled},null,8,Xt)])):ve("",!0),H("span",Jt,[U(o.$slots,"default",{node:e.node,data:e.node.data},()=>[pt(gt(h.value),1)],!0)])])],46,jt))}}),et=(e,i)=>{const t=e.__vccOpts||e;for(const[s,r]of i)t[s]=r;return t},Zt=et(Qt,[["__scopeId","data-v-4ce88321"]]);function ei(e,i,t){const s=ue(()=>{const u=new Set;return i.value.forEach(a=>{a.isChecked&&u.add(a.id)}),u}),r=ue(()=>{const u=new Set;return i.value.forEach(a=>{a.isIndeterminate&&u.add(a.id)}),u}),h=Q(null),d=Q(null),p=()=>{i.value.forEach(u=>{u.isChecked=!1,u.isIndeterminate=!1}),e.defaultCheckedKeys&&e.defaultCheckedKeys.length>0&&e.defaultCheckedKeys.forEach(u=>{i.value.find(z=>z.id===u)&&w(u,!0)})},v=()=>{if(e.currentNodeKey!==void 0){h.value=e.currentNodeKey;const u=t(e.currentNodeKey);d.value=u}},g=u=>{const a=[],z=t(u);if(!z)return a;const D=y=>{re(y,e.props).forEach(I=>{const S=q(I,e.props);a.push(S),D(I)})};return D(z),a},$=()=>{r.value.clear();const u=new Set(i.value.map(a=>a.id));for(const a of u){const z=g(a);if(z.length===0)continue;const D=z.filter(y=>s.value.has(y));D.length>0&&D.length<z.length&&r.value.add(a)}},x=(u,a)=>{u.isChecked=a,u.isIndeterminate=!1;const z=(y,C)=>{y.children&&y.children.forEach(I=>{I.isChecked=C,I.isIndeterminate=!1,z(I,C)})};z(u,a);const D=y=>{const C=y.parentId;if(C!==null){const I=i.value.find(S=>S.id===C);if(I){const S=i.value.filter(T=>T.parentId===C),K=S.filter(T=>T.isChecked).length,O=S.filter(T=>T.isIndeterminate).length;K===S.length?(I.isChecked=!0,I.isIndeterminate=!1):K===0&&O===0?(I.isChecked=!1,I.isIndeterminate=!1):(I.isChecked=!1,I.isIndeterminate=!0),D(I)}}};D(u)},w=(u,a,z)=>{const D=i.value.find(C=>C.id===u);if(!D)return;z??e.checkStrictly??!1?(D.isChecked=a,D.isIndeterminate=!1):x(D,a)},c=u=>{const a=s.value.has(u);w(u,!a)},m=(u,a=null)=>{h.value=u,d.value=a},o=(u=!1,a=!1)=>{const z=[],D=a?new Set([...s.value,...r.value]):s.value;for(const y of D){const C=t(y);C&&(u?re(C,e.props).length===0&&z.push(C):z.push(C))}return z},b=(u=!1)=>u?o(!0).map(z=>q(z,e.props)):Array.from(s.value),L=(u,a=!1)=>{s.value.clear(),u.filter(D=>a?fe(D,e.props):!0).map(D=>q(D,e.props)).forEach(D=>{w(D,!0)}),e.checkStrictly||$()},N=(u,a=!1)=>{s.value.clear(),(a?u.filter(D=>{const y=t(D);return y&&fe(y,e.props)}):u).forEach(D=>{w(D,!0)}),e.checkStrictly||$()};return v(),me(()=>e.currentNodeKey,u=>{u!==void 0&&m(u,t(u))}),{checkedKeys:s,halfCheckedKeys:r,selectedKey:h,currentNode:d,initNodeChecked:p,setNodeChecked:w,toggleNodeChecked:c,setCurrentNode:m,getCheckedNodes:o,getCheckedKeys:b,setCheckedNodes:L,setCheckedKeys:N,updateHalfCheckedKeys:$}}function ti(e,i,t,s){const r=Q(new Set),h=()=>{if(e.defaultExpandAll){const c=Wt(e.data,e.props);r.value=new Set(c)}else e.defaultExpandedKeys&&e.defaultExpandedKeys.length>0?r.value=new Set(e.defaultExpandedKeys):r.value=new Set},d=c=>{const m=[];return c.children&&c.children.forEach(o=>{m.push(o),o.isExpanded&&m.push(...d(o))}),m},p=c=>{if(typeof c.visibleIndex!="number")return;const m=d(c);m.length!==0&&(t.value.splice(c.visibleIndex+1,0,...m),s())},v=c=>{if(typeof c.visibleIndex!="number")return;const m=d(c);m.length!==0&&(t.value.splice(c.visibleIndex+1,m.length),s())},g=c=>{e.accordion&&i.value.filter(o=>o.parentId===c.parentId&&o.id!==c.id&&o.isExpanded).forEach(o=>{o.isExpanded=!1,r.value.delete(o.id),v(o)}),c.isExpanded=!0,r.value.add(c.id),p(c)},$=(c,m)=>{c.isExpanded=m,r.value.delete(c.id),c.children&&c.children.forEach(o=>{$(o,m)})},x=c=>{v(c),$(c,!1)};return{expandedKeys:r,initExpandedKeys:h,expandNode:g,collapseNode:x,toggleNode:c=>{c.isExpanded?x(c):g(c)}}}function ii(e,i,t,s,r){const h=()=>{const g=i.value.filter(w=>w.parentId===null),$=[],x=w=>{$.push(w),w.isExpanded&&w.children&&w.children.forEach(c=>x(c))};g.forEach(w=>x(w)),r($)},d=(g,$)=>g?Ve($,e.props).toLowerCase().includes(g.toLowerCase()):!0,p=g=>g?new Promise(async $=>{const x=e.filterNodeMethod||d,w=new Set;i.value.forEach(c=>{if(x(g,c.data)){w.add(c);let m=c.parentId;for(;m;){const o=t.value.get(m);o?(w.add(o),o.isExpanded=!0,s.value.add(o.id),m=o.parentId):m=null}}}),r(i.value.filter(c=>w.has(c))),$(void 0)}):(i.value.forEach($=>{$.isLeaf||($.isExpanded=!0,s.value.add($.id))}),h(),Promise.resolve());return{filter:p,clearFilter:()=>{p("")}}}function si(e,i){const t=Q(null),s=Q(null),r=Q(null),h=c=>!0,d=(c,m,o,b)=>{if(o==="inner"){const L=q(c,b.props),N=u=>q(u,b.props)===L?!0:re(u,b.props).some(z=>N(z));return!N(m)}return!0};return{draggingNode:t,dropNode:s,dropType:r,handleDragStart:(c,m)=>{t.value=c,m.dataTransfer&&(m.dataTransfer.effectAllowed="move")},handleDragEnter:(c,m)=>{if(!t.value)return;const o=i(t.value.id),b=i(c.id);if(!o||!b||!(e.allowDrag||h)(o))return;s.value=c;const N=m.currentTarget.getBoundingClientRect(),u=m.clientY-N.top,a=N.height,z=a/3;if(u<z?r.value="prev":u>a-z?r.value="next":r.value="inner",!(e.allowDrop||((y,C,I)=>d(y,C,I,e)))(o,b,r.value)){r.value=null;return}m.preventDefault()},handleDragLeave:(c,m)=>{var b;const o=m.relatedTarget;o&&m.currentTarget.contains(o)||((b=s.value)==null?void 0:b.id)===c.id&&(s.value=null,r.value=null)},handleDragOver:(c,m)=>{if(!t.value||!s.value||s.value.id!==c.id)return;const o=i(t.value.id),b=i(c.id);if(!o||!b)return;const L=m.currentTarget.getBoundingClientRect(),N=m.clientY-L.top,u=L.height,a=u/3;let z;if(N<a?z="prev":N>u-a?z="next":z="inner",!(e.allowDrop||((y,C,I)=>d(y,C,I,e)))(o,b,z)){r.value=null,m.preventDefault();return}r.value=z,m.preventDefault()},handleDragEnd:(c,m)=>{t.value=null,s.value=null,r.value=null},handleDrop:(c,m)=>{if(!t.value||!s.value||r.value===null)return;const o=i(t.value.id),b=i(c.id);if(!o||!b||!(e.allowDrop||((u,a,z)=>d(u,a,z,e)))(o,b,r.value))return;t.value=null,s.value=null;const N=r.value;return r.value=null,{draggingNode:o,dropNode:b,dropType:N}}}}function ri(e,i){const t=Q([]),s=Q([]),r=()=>{s.value.forEach((V,Y)=>{V.visibleIndex=Y})},h=V=>{s.value=V,r()},d=Q(e.data),p=Q(new Map),v=V=>{const Y=p.value.get(V);return Y?Y.data:null},g=V=>p.value.get(V)||null,{checkedKeys:$,halfCheckedKeys:x,selectedKey:w,currentNode:c,toggleNodeChecked:m,setCurrentNode:o,getCheckedNodes:b,getCheckedKeys:L,setCheckedNodes:N,setCheckedKeys:u,initNodeChecked:a}=ei(e,t,v),{expandNode:z,collapseNode:D,expandedKeys:y,initExpandedKeys:C}=ti(e,t,s,r),{filter:I}=ii(e,t,p,y,h),S=si(e,v),K=(V,Y=0,le=null,ae=0,oe=!0,P)=>{const ne=new Map,$e=[];function n(k,_=0,E=null,A=0,j=!0,G=[],R){const B=[];let ie=k.length;for(let se=0;se<ie;se++){let we=A+se;const X=k[se],De=q(X,R),ge=re(X,R),Re=y.value.has(De),tt=fe(X,R),de={id:De,data:X,level:_,parentId:(E==null?void 0:E.id)||null,index:we,isExpanded:Re,isDisabled:Ht(X,R),isLeaf:tt,isLoading:!1,isLoaded:!1,isChecked:!1,rawChildren:ge.length>0?ge:void 0};if(B.push(de),G.push(de),j&&$e.push(de),ge.length>0){const it=n(ge,_+1,de,we,Re&&j,G,R);de.children=it}ne.set(De,de)}return B}const l=[];return{nodes:n(V,Y,le,ae,oe,l,P),flatNodes:l,nodeMap:ne,visibleNodes:$e}};let O=!1;const T=()=>{if(O)return;O=!0;const{flatNodes:V,nodeMap:Y,visibleNodes:le}=K(d.value,0,null,0,!0,e.props);t.value=V,p.value=Y,h(le),O=!1},ee=(V,Y)=>{const{nodes:le,flatNodes:ae,nodeMap:oe}=K(Y,V.level+1,V,V.index+1,!0,e.props);V.children=le,oe.forEach((P,ne)=>{p.value.set(ne,P)}),t.value.splice(V.index+1,0,...ae),requestAnimationFrame(()=>{for(let P=V.index+ae.length;P<t.value.length;P++){const ne=t.value[P];ne.index=P}})},W={needEmit:!0,resetExpanded:!0,resetChecked:!0};me(()=>e.data,V=>{d.value=V,W.needEmit=!0,te()},{deep:!0}),me(()=>[e.defaultExpandedKeys,e.defaultExpandAll],()=>{W.resetExpanded=!0,te()},{deep:!0,immediate:!1}),me(()=>e.defaultCheckedKeys,()=>{W.resetChecked=!0,te()},{deep:!0,immediate:!1});let M=null;const te=()=>{M&&clearTimeout(M),M=setTimeout(()=>{W.resetExpanded&&C(),T(),W.resetChecked&&a(),W.needEmit&&ze(()=>{i("node-generated")}),W.needEmit=!1,W.resetExpanded=!1,W.resetChecked=!1,M=null},5)};return te(),{flatTree:t,visibleNodes:s,expandedKeys:y,checkedKeys:$,rawData:d,getNodeData:v,getFlatNode:g,regenerateFlatTree:te,flattenTree:K,insertFlatTree:ee,halfCheckedKeys:x,selectedKey:w,currentNode:c,toggleNodeChecked:m,setCurrentNode:o,getCheckedNodes:b,getCheckedKeys:L,setCheckedNodes:N,setCheckedKeys:u,expandNode:z,collapseNode:D,dragState:S,filter:I}}const ni={key:0,class:"vue-virtual-tree__loading"},li={class:"default-icon"},oi={key:0,viewBox:"0 0 1024 1024",width:"16",height:"16"},ai={key:1,class:"vue-virtual-tree__empty"},di=He({name:"VirtualTree",__name:"VirtualTree",props:{data:{default:()=>[]},props:{default:()=>({})},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1},defaultExpandedKeys:{default:()=>[]},defaultCheckedKeys:{default:()=>[]},currentNodeKey:{},expandOnClickNode:{type:Boolean,default:!0},lazy:{type:Boolean,default:!1},load:{},filterNodeMethod:{},accordion:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrop:{},allowDrag:{},itemSize:{default:32},height:{default:"100%"},indent:{type:[Number,Function],default:18},loading:{type:Boolean,default:!1}},emits:["node-click","node-check","node-expand","node-collapse","current-change","node-drag-start","node-drag-enter","node-drag-leave","node-drag-over","node-drag-end","node-drop","node-generated"],setup(e,{expose:i,emit:t}){const s=e,r=t,{visibleNodes:h,rawData:d,getNodeData:p,getFlatNode:v,regenerateFlatTree:g,insertFlatTree:$,checkedKeys:x,halfCheckedKeys:w,selectedKey:c,currentNode:m,toggleNodeChecked:o,setCurrentNode:b,getCheckedNodes:L,getCheckedKeys:N,setCheckedNodes:u,setCheckedKeys:a,expandNode:z,collapseNode:D,dragState:y,filter:C}=ri(s,r),I=Q(null),S=n=>{const l=n.target;if(!l)return null;const f=l.closest("[data-node-id]");if(!f)return null;const k=f.getAttribute("data-node-id");if(!k)return null;const _=isNaN(Number(k))?k:Number(k);return v(_)},K=n=>{const l=S(n);if(!l)return;const f=n.target;if(!f)return;const k=f.closest(".vue-virtual-tree-node__expand-icon"),_=f.closest(".vue-virtual-tree-node__checkbox"),E=f.closest(".vue-virtual-tree-node__content");_?W(l):k?l.isExpanded?ee(l):T(l):E&&(O(l,n),s.expandOnClickNode&&!fe(l.data,s.props)&&(l.isExpanded?ee(l):T(l)))},O=(n,l)=>{n.isDisabled||(b(n.id,n.data),r("current-change",n.data,P(n)),r("node-click",n.data,P(n),l))},T=async n=>{if(!n.isDisabled){if(s.lazy&&!n.isLoaded&&s.load){let l=function(){n.isLoading=!1,n.isLoaded=!0};n.isLoading=!0,n.isLoaded=!1;try{await new Promise(f=>{s.load(n.data,k=>{k&&k.length>0&&$(n,k),l(),f()})})}catch(f){l(),console.error("Lazy load error:",f)}}z(n),r("node-expand",n.data,P(n))}},ee=n=>{n.isDisabled||(D(n),r("node-collapse",n.data,P(n)))},W=n=>{if(n.isDisabled)return;o(n.id);const l=L(),f=N(),k=L(!1,!0).filter(E=>{const A=q(E,s.props);return w.value.has(A)&&!x.value.has(A)}),_=Array.from(w.value).filter(E=>!x.value.has(E));r("node-check",n.data,{checkedKeys:f,checkedNodes:l,halfCheckedKeys:_,halfCheckedNodes:k})},M=(n,l)=>{y.handleDragStart(n,l),r("node-drag-start",n.data,l)},te=(n,l)=>{var f,k,_;y.handleDragEnter(n,l),((k=(f=y.dropNode)==null?void 0:f.value)==null?void 0:k.id)===n.id&&((_=y.draggingNode)!=null&&_.value)&&r("node-drag-enter",y.draggingNode.value.data,l,n.data)},V=(n,l)=>{var f;y.handleDragLeave(n,l),(f=y.draggingNode)!=null&&f.value&&r("node-drag-leave",y.draggingNode.value.data,l,n.data)},Y=(n,l)=>{var f,k,_;y.handleDragOver(n,l),((k=(f=y.dropNode)==null?void 0:f.value)==null?void 0:k.id)===n.id&&((_=y.draggingNode)!=null&&_.value)&&r("node-drag-over",y.draggingNode.value.data,l,n.data)},le=(n,l)=>{var f;(f=y.draggingNode)!=null&&f.value&&r("node-drag-end",y.draggingNode.value.data,l),y.handleDragEnd(n,l)},ae=(n,l)=>{const f=y.handleDrop(n,l);f&&r("node-drop",f.draggingNode,f.dropNode,f.dropType,l)},oe=new WeakMap,P=n=>{if(oe.has(n))return oe.get(n);let l=null,f=null;const k=()=>{if(l!==null)return l;if(n.parentId===null)return l=null,null;const R=v(n.parentId);return R?(l=P(R),l):(l=null,null)},_=()=>(f!==null||(f=h.value.filter(B=>B.parentId===n.id).map(B=>P(B))),f),E=()=>h.value.filter(B=>B.parentId===n.parentId&&B.id!==n.id).map(B=>P(B)),A=()=>{const R=[],B=new Set,ie=se=>{h.value.filter(X=>X.parentId===se).forEach(X=>{B.has(X.id)||(B.add(X.id),R.push(P(X)),ie(X.id))})};return ie(n.id),R},j=()=>{const R=[],B=new Set;let ie=n.parentId;for(;ie!==null&&!B.has(ie);){B.add(ie);const se=v(ie);if(se)R.push(P(se)),ie=se.parentId;else break}return R},G={data:n.data,key:n.id,level:n.level,get parent(){return k()},get children(){return _()},expanded:n.isExpanded,checked:n.isChecked||!1,disabled:n.isDisabled||!1,isLeaf:fe(n.data,s.props),getLabel:()=>Ve(n.data,s.props),getData:()=>n.data,getParent:k,getChildren:_,getSiblings:E,getAllChildren:A,getAllParents:j};return oe.set(n,G),G},ne=n=>{const l=v(n);return l?P(l):null};return i({getCheckedNodes:(n,l)=>L(n,l),getCheckedKeys:n=>N(n),setCheckedNodes:(n,l)=>{u(n,l)},setCheckedKeys:(n,l)=>{a(n,l)},getCurrentNode:()=>m.value,setCurrentNode:n=>{if(typeof n=="string"||typeof n=="number"){const l=p(n);b(n,l)}else{const l=q(n,s.props);b(l,n)}},getCurrentKey:()=>c.value,setCurrentKey:n=>{b(n,p(n))},filter:n=>C(n).then(()=>{ze(()=>{var l,f;(l=I.value)==null||l.scrollToItem(0),(f=I.value)==null||f.forceUpdate()})}),getNode:n=>ne(n),remove:n=>{if(!Ce(d.value,n,s.props))return;const f=(k,_)=>{for(let E=0;E<k.length;E++){if(q(k[E],s.props)===_)return k.splice(E,1),!0;const A=re(k[E],s.props);if(A.length>0&&f(A,_))return!0}return!1};f(d.value,n),g()},append:(n,l)=>{if(l===void 0)d.value.push(n);else{const f=Ce(d.value,l,s.props);if(f){const _=(s.props||{}).children||"children";f[_]||(f[_]=[]),f[_].push(n)}}g()},insertBefore:(n,l)=>{const f=(k,_,E)=>{for(let A=0;A<k.length;A++){if(q(k[A],s.props)===_)return k.splice(A,0,E),!0;const j=re(k[A],s.props);if(j.length>0&&f(j,_,E))return!0}return!1};f(d.value,l,n),g()},insertAfter:(n,l)=>{const f=(k,_,E)=>{for(let A=0;A<k.length;A++){if(q(k[A],s.props)===_)return k.splice(A+1,0,E),!0;const j=re(k[A],s.props);if(j.length>0&&f(j,_,E))return!0}return!1};f(d.value,l,n),g()},updateKeyChildren:(n,l)=>{const f=Ce(d.value,n,s.props);if(f){const _=(s.props||{}).children||"children";f[_]=l,g()}},nodeGenerated:()=>{r("node-generated")}}),(n,l)=>(F(),J("div",{class:"vue-virtual-tree",style:Ee({height:typeof e.height=="number"?`${e.height}px`:e.height}),onClick:K},[e.loading?U(n.$slots,"tree-loading",{key:0},()=>[e.loading?(F(),J("div",ni,[...l[0]||(l[0]=[H("span",{class:"vue-virtual-tree-loading-text"},"加载中...",-1)])])):ve("",!0)],!0):(F(),J(Be,{key:1},[e.data.length>0?(F(),he(ce(Ae),{key:0,ref_key:"dynamicScrollerRef",ref:I,items:ce(h),"min-item-size":e.itemSize||32,class:"vue-virtual-tree__scroller"},{default:Z(({item:f,index:k,active:_})=>[Fe(ce(Je),{item:f,active:_,"data-index":k,class:"vue-virtual-tree__item"},{default:Z(()=>{var E,A,j;return[(F(),he(Zt,{node:f,key:f.id,props:s.props,"show-checkbox":e.showCheckbox,"expand-on-click-node":e.expandOnClickNode,draggable:e.draggable,indent:s.indent,"current-key":ce(c),"drop-type":((A=(E=ce(y).dropNode)==null?void 0:E.value)==null?void 0:A.id)===f.id?((j=ce(y).dropType)==null?void 0:j.value)??null:null,onDragStart:M,onDragEnter:te,onDragLeave:V,onDragOver:Y,onDragEnd:le,onDrop:ae},{default:Z(({node:G,data:R})=>[U(n.$slots,"default",{node:G,data:R},void 0,!0)]),loading:Z(({node:G,data:R})=>[U(n.$slots,"loading",{node:G,data:R},()=>[l[1]||(l[1]=H("svg",{class:"vue-virtual-tree-node__loading-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[H("g",{transform:"translate(12,12)"},[H("circle",{cx:"0",cy:"0",r:"8",fill:"none",stroke:"currentColor","stroke-width":"1",opacity:"0.2"}),H("g",{class:"vue-virtual-tree-loading-dots"},[H("circle",{cx:"0",cy:"-8",r:"2",fill:"currentColor"}),H("circle",{cx:"6.928",cy:"-4",r:"2",fill:"currentColor",opacity:"0.7"}),H("circle",{cx:"6.928",cy:"4",r:"2",fill:"currentColor",opacity:"0.4"})])])],-1))],!0)]),icon:Z(({node:G,data:R})=>[U(n.$slots,"icon",{node:G,data:R},()=>[H("span",li,[G.isLeaf?ve("",!0):(F(),J("svg",oi,[...l[2]||(l[2]=[H("path",{d:"M384 384l256 256-256 256z",fill:"currentColor"},null,-1)])]))])],!0)]),_:3},8,["node","props","show-checkbox","expand-on-click-node","draggable","indent","current-key","drop-type"]))]}),_:2},1032,["item","active","data-index"])]),_:3},8,["items","min-item-size"])):(F(),J("div",ai,[U(n.$slots,"empty",{},()=>[l[3]||(l[3]=H("span",null,"暂无数据",-1))],!0)]))],64))],4))}}),ui=et(di,[["__scopeId","data-v-6a1c7ab9"]]);export{ui as V,et as _};
