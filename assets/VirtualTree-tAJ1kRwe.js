import{n as ke,p as dt,l as ct,m as ut,q as ue,o as B,s as ht,x as ft,y as He,z as vt,w as pt,c as Q,b as ve,f as We,A as U,h as ee,F as je,j as gt,B as Be,C as qe,D as mt,E as Ve,G as Se,H as yt,I as bt,J as St,d as Ye,r as F,K as ne,a as H,e as zt,t as kt,g as me,u as ce}from"./index-DtppP3A4.js";function $t(){var e=window.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);var t=e.indexOf("Trident/");if(t>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):-1}let ye;function Ne(){Ne.init||(Ne.init=!0,ye=$t()!==-1)}var $e={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ne(),ke(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",ye&&this.$el.appendChild(e),e.data="about:blank",ye||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!ye&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const wt=ut();dt("data-v-b329ee4c");const Dt={class:"resize-observer",tabindex:"-1"};ct();const _t=wt((e,i,t,s,r,h)=>(B(),ue("div",Dt)));$e.render=_t;$e.__scopeId="data-v-b329ee4c";$e.__file="src/components/ResizeObserver.vue";function be(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?be=function(i){return typeof i}:be=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},be(e)}function Ct(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function It(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function xt(e,i,t){return i&&It(e.prototype,i),e}function Fe(e){return Tt(e)||Nt(e)||Et(e)||Ot()}function Tt(e){if(Array.isArray(e))return Ee(e)}function Nt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Et(e,i){if(e){if(typeof e=="string")return Ee(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ee(e,i)}}function Ee(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,s=new Array(i);t<i;t++)s[t]=e[t];return s}function Ot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function At(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function Vt(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,r,h,d=function(v){for(var S=arguments.length,_=new Array(S>1?S-1:0),x=1;x<S;x++)_[x-1]=arguments[x];if(h=_,!(s&&v===r)){var R=t.leading;typeof R=="function"&&(R=R(v,r)),(!s||v!==r)&&R&&e.apply(void 0,[v].concat(Fe(h))),r=v,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[v].concat(Fe(h))),s=0},i)}};return d._clear=function(){clearTimeout(s),s=null},d}function Ge(e,i){if(e===i)return!0;if(be(e)==="object"){for(var t in e)if(!Ge(e[t],i[t]))return!1;return!0}return!1}var Rt=function(){function e(i,t,s){Ct(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(t,s)}return xt(e,[{key:"createObserver",value:function(t,s){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=At(t),this.callback=function(g,v){r.options.callback(g,v),g&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var h=this.options.throttleOptions||{},d=h.leading;this.callback=Vt(this.callback,this.options.throttle,{leading:function(v){return d==="both"||d==="visible"&&v||d==="hidden"&&!v}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(g){var v=g[0];if(g.length>1){var S=g.find(function(x){return x.isIntersecting});S&&(v=S)}if(r.callback){var _=v.isIntersecting&&v.intersectionRatio>=r.threshold;if(_===r.oldResult)return;r.oldResult=_,r.callback(_,v)}},this.options.intersection),ke(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function Xe(e,i,t){var s=i.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Rt(e,s,t);e._vue_visibilityState=r}}function Lt(e,i,t){var s=i.value,r=i.oldValue;if(!Ge(s,r)){var h=e._vue_visibilityState;if(!s){Je(e);return}h?h.createObserver(s,t):Xe(e,{value:s},t)}}function Je(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var Mt={beforeMount:Xe,updated:Lt,unmounted:Je};function Kt(e){return{all:e=e||new Map,on:function(i,t){var s=e.get(i);s&&s.push(t)||e.set(i,[t])},off:function(i,t){var s=e.get(i);s&&s.splice(s.indexOf(t)>>>0,1)},emit:function(i,t){(e.get(i)||[]).slice().map(function(s){s(t)}),(e.get("*")||[]).slice().map(function(s){s(i,t)})}}}var Pt={itemsLimit:1e3},Bt=/(auto|scroll)/;function Qe(e,i){return e.parentNode===null?i:Qe(e.parentNode,i.concat([e]))}var xe=function(i,t){return getComputedStyle(i,null).getPropertyValue(t)},Ft=function(i){return xe(i,"overflow")+xe(i,"overflow-y")+xe(i,"overflow-x")},Ut=function(i){return Bt.test(Ft(i))};function Ue(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=Qe(e.parentNode,[]),t=0;t<i.length;t+=1)if(Ut(i[t]))return i[t];return document.scrollingElement||document.documentElement}}function Oe(e){"@babel/helpers - typeof";return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Oe(e)}var Ze={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(i){return["vertical","horizontal"].includes(i)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function et(){return this.items.length&&Oe(this.items[0])!=="object"}var Ae=!1;if(typeof window<"u"){Ae=!1;try{var Ht=Object.defineProperty({},"passive",{get:function(){Ae=!0}});window.addEventListener("test",null,Ht)}catch{}}let Wt=0;var Re={name:"RecycleScroller",components:{ResizeObserver:$e},directives:{ObserveVisibility:Mt},props:{...Ze,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},i=this.items,t=this.sizeField,s=this.minItemSize;let r=1e4,h=0,d;for(let g=0,v=i.length;g<v;g++)d=i[g][t]||s,d<r&&(r=d),h+=d,e[g]={accumulator:h,size:d};return this.$_computedMinItemSize=r,e}return[]},simpleArray:et,itemIndexByKey(){const{keyField:e,items:i}=this,t={};for(let s=0,r=i.length;s<r;s++)t[i[s][e]]=s;return t}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,i,t,s,r){const h=ht({id:Wt++,index:i,used:!0,key:s,type:r}),d=ft({item:t,position:0,nr:h});return e.push(d),d},unuseView(e,i=!1){const t=this.$_unusedViews,s=e.nr.type;let r=t.get(s);r||(r=[],t.set(s,r)),r.push(e),i||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const i=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:t}=this.updateVisibleItems(!1,!0);t||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});i(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&i()},this.updateInterval))}},handleVisibilityChange(e,i){this.ready&&(e||i.boundingClientRect.width!==0||i.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,i=!1){const t=this.itemSize,s=this.gridItems||1,r=this.itemSecondarySize||t,h=this.$_computedMinItemSize,d=this.typeField,g=this.simpleArray?null:this.keyField,v=this.items,S=v.length,_=this.sizes,x=this.$_views,R=this.$_unusedViews,u=this.pool,m=this.itemIndexByKey;let o,y,$,w,k;if(!S)o=y=w=k=$=0;else if(this.$_prerender)o=w=0,y=k=Math.min(this.prerender,v.length),$=null;else{const b=this.getScroll();if(i){let V=b.start-this.$_lastUpdateScrollPosition;if(V<0&&(V=-V),t===null&&V<h||V<t)return{continuous:!0}}this.$_lastUpdateScrollPosition=b.start;const L=this.buffer;b.start-=L,b.end+=L;let E=0;if(this.$refs.before&&(E=this.$refs.before.scrollHeight,b.start-=E),this.$refs.after){const V=this.$refs.after.scrollHeight;b.end+=V}if(t===null){let V,W=0,le=S-1,K=~~(S/2),se;do se=K,V=_[K].accumulator,V<b.start?W=K:K<S-1&&_[K+1].accumulator>b.start&&(le=K),K=~~((W+le)/2);while(K!==se);for(K<0&&(K=0),o=K,$=_[S-1].accumulator,y=K;y<S&&_[y].accumulator<b.end;y++);for(y===-1?y=v.length-1:(y++,y>S&&(y=S)),w=o;w<S&&E+_[w].accumulator<b.start;w++);for(k=w;k<S&&E+_[k].accumulator<b.end;k++);}else{o=~~(b.start/t*s);const V=o%s;o-=V,y=Math.ceil(b.end/t*s),w=Math.max(0,Math.floor((b.start-E)/t*s)),k=Math.floor((b.end-E)/t*s),o<0&&(o=0),y>S&&(y=S),w<0&&(w=0),k>S&&(k=S),$=Math.ceil(S/s)*t}}y-o>Pt.itemsLimit&&this.itemsLimitError(),this.totalSize=$;let l;const f=o<=this.$_endIndex&&y>=this.$_startIndex;if(f)for(let b=0,L=u.length;b<L;b++)l=u[b],l.nr.used&&(e&&(l.nr.index=m[l.item[g]]),(l.nr.index==null||l.nr.index<o||l.nr.index>=y)&&this.unuseView(l));const T=f?null:new Map;let p,C,N;for(let b=o;b<y;b++){p=v[b];const L=g?p[g]:p;if(L==null)throw new Error(`Key is ${L} on item (keyField is '${g}')`);if(l=x.get(L),!t&&!_[b].size){l&&this.unuseView(l);continue}C=p[d];let E=R.get(C),V=!1;if(!l)f?E&&E.length?l=E.pop():l=this.addView(u,b,p,L,C):(N=T.get(C)||0,(!E||N>=E.length)&&(l=this.addView(u,b,p,L,C),this.unuseView(l,!0),E=R.get(C)),l=E[N],T.set(C,N+1)),x.delete(l.nr.key),l.nr.used=!0,l.nr.index=b,l.nr.key=L,l.nr.type=C,x.set(L,l),V=!0;else if(!l.nr.used&&(l.nr.used=!0,V=!0,E)){const W=E.indexOf(l);W!==-1&&E.splice(W,1)}l.item=p,V&&(b===v.length-1&&this.$emit("scroll-end"),b===0&&this.$emit("scroll-start")),t===null?(l.position=_[b-1].accumulator,l.offset=0):(l.position=Math.floor(b/s)*t,l.offset=b%s*r)}return this.$_startIndex=o,this.$_endIndex=y,this.emitUpdate&&this.$emit("update",o,y,w,k),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:f}},getListenerTarget(){let e=Ue(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:i}=this,t=i==="vertical";let s;if(this.pageMode){const r=e.getBoundingClientRect(),h=t?r.height:r.width;let d=-(t?r.top:r.left),g=t?window.innerHeight:window.innerWidth;d<0&&(g+=d,d=0),d+g>h&&(g=h-d),s={start:d,end:d+g}}else t?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ae?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let i;const t=this.gridItems||1;this.itemSize===null?i=e>0?this.sizes[e-1].accumulator:0:i=Math.floor(e/t)*this.itemSize,this.scrollToPosition(i)},scrollToPosition(e){const i=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let t,s,r;if(this.pageMode){const h=Ue(this.$el),d=h.tagName==="HTML"?0:h[i.scroll],g=h.getBoundingClientRect(),S=this.$el.getBoundingClientRect()[i.start]-g[i.start];t=h,s=i.scroll,r=e+d+S}else t=this.$el,s=i.scroll,r=e;t[s]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,i)=>e.nr.index-i.nr.index)}}};const jt={key:0,ref:"before",class:"vue-recycle-scroller__slot"},qt={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Yt(e,i,t,s,r,h){const d=He("ResizeObserver"),g=vt("observe-visibility");return pt((B(),Q("div",{class:Se(["vue-recycle-scroller",{ready:r.ready,"page-mode":t.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:i[0]||(i[0]=(...v)=>h.handleScroll&&h.handleScroll(...v))},[e.$slots.before?(B(),Q("div",jt,[U(e.$slots,"before")],512)):ve("v-if",!0),(B(),ue(Be(t.listTag),{ref:"wrapper",style:Ve({[e.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:Se(["vue-recycle-scroller__item-wrapper",t.listClass])},{default:ee(()=>[(B(!0),Q(je,null,gt(r.pool,v=>(B(),ue(Be(t.itemTag),qe({key:v.nr.id,style:r.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${v.position}px) translate${e.direction==="vertical"?"X":"Y"}(${v.offset}px)`,width:t.gridItems?`${e.direction==="vertical"&&t.itemSecondarySize||t.itemSize}px`:void 0,height:t.gridItems?`${e.direction==="horizontal"&&t.itemSecondarySize||t.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[t.itemClass,{hover:!t.skipHover&&r.hoverKey===v.nr.key}]]},mt(t.skipHover?{}:{mouseenter:()=>{r.hoverKey=v.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:ee(()=>[U(e.$slots,"default",{item:v.item,index:v.nr.index,active:v.nr.used})]),_:2},1040,["style","class"]))),128)),U(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(B(),Q("div",qt,[U(e.$slots,"after")],512)):ve("v-if",!0),We(d,{onNotify:h.handleResize},null,8,["onNotify"])],34)),[[g,h.handleVisibilityChange]])}Re.render=Yt;Re.__file="src/components/RecycleScroller.vue";var Le={name:"DynamicScroller",components:{RecycleScroller:Re},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const i of e)if(i.target&&i.target.$_vs_onResize){let t,s;if(i.borderBoxSize){const r=i.borderBoxSize[0];t=r.inlineSize,s=r.blockSize}else t=i.contentRect.width,s=i.contentRect.height;i.target.$_vs_onResize(i.target.$_vs_id,t,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Ze,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:et,itemsWithSize(){const e=[],{items:i,keyField:t,simpleArray:s}=this,r=this.vscrollData.sizes,h=i.length;for(let d=0;d<h;d++){const g=i[d],v=s?d:g[t];let S=r[v];typeof S>"u"&&!this.$_undefinedMap[v]&&(S=0),e.push({item:g,id:v,size:S})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,i){const t=this.$el.scrollTop;let s=0,r=0;const h=Math.min(e.length,i.length);for(let g=0;g<h&&!(s>=t);g++)s+=i[g].size||this.minItemSize,r+=e[g].size||this.minItemSize;const d=r-s;d!==0&&(this.$el.scrollTop+=d)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=Kt()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const i=this.$refs.scroller;i&&i.scrollToItem(e)},getItemSize(e,i=void 0){const t=this.simpleArray?i??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[t]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const i=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(i)})};requestAnimationFrame(i)})}}};function Gt(e,i,t,s,r,h){const d=He("RecycleScroller");return B(),ue(d,qe({ref:"scroller",items:h.itemsWithSize,"min-item-size":t.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:h.onScrollerResize,onVisible:h.onScrollerVisible}),{default:ee(({item:g,index:v,active:S})=>[U(e.$slots,"default",yt(bt({item:g.item,index:v,active:S,itemWithSize:g})))]),before:ee(()=>[U(e.$slots,"before")]),after:ee(()=>[U(e.$slots,"after")]),empty:ee(()=>[U(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Le.render=Gt;Le.__file="src/components/DynamicScroller.vue";var tt={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,i){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const t=this.vscrollData.sizes[i],s=this.vscrollData.sizes[e];t!=null&&t!==s&&this.applySize(t)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const i=this.$el.offsetWidth,t=this.$el.offsetHeight;this.applyWidthHeight(i,t)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,i){const t=~~(this.vscrollParent.direction==="vertical"?i:e);t&&this.size!==t&&this.applySize(t)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,i,t){this.id===e&&this.applyWidthHeight(i,t)}},render(){return St(this.tag,this.$slots.default())}};tt.__file="src/components/DynamicScrollerItem.vue";const pe={id:"id",children:"children",label:"label",disabled:"disabled",isLeaf:"isLeaf"};function q(e,i={}){const t={...pe,...i};return e[t.id]??e.id??""}function Me(e,i={}){const t={...pe,...i};return e[t.label]??e.label??""}function te(e,i={}){const t={...pe,...i};return e[t.children]??e.children??[]}function Xt(e,i={}){const t={...pe,...i};return e[t.disabled]??e.disabled??!1}function he(e,i={}){const t={...pe,...i};return te(e,i).length>0?!1:e[t.isLeaf]!==void 0?e[t.isLeaf]??!1:!0}function it(e,i,t=null,s={}){for(const r of e){if(i(r,t)===!1)continue;const d=te(r,s);d.length>0&&it(d,i,r,s)}}function st(e,i,t={}){for(const s of e){if(i(s))return s;const r=te(s,t);if(r.length>0){const h=st(r,i,t);if(h)return h}}return null}function Te(e,i,t={}){return st(e,s=>q(s,t)===i,t)}function Jt(e,i={}){const t=[];return it(e,s=>{t.push(q(s,i))},null,i),t}const Qt=["draggable","data-node-id"],Zt={class:"vue-virtual-tree-node__content"},ei={key:0},ti={key:0,class:"vue-virtual-tree-node__checkbox"},ii=["checked","indeterminate","disabled"],si={class:"vue-virtual-tree-node__label"},ri=Ye({__name:"TreeNode",props:{node:{},props:{},showCheckbox:{type:Boolean},expandOnClickNode:{type:Boolean},draggable:{type:Boolean},currentKey:{},dropType:{},indent:{type:[Number,Function]}},emits:["drag-start","drag-enter","drag-leave","drag-over","drag-end","drop"],setup(e,{emit:i}){const t=e,s=i,r=F(!1),h=ne(()=>Me(t.node.data,t.props)),d=ne(()=>he(t.node.data,t.props)),g=ne(()=>t.currentKey!==null&&t.currentKey!==void 0&&t.currentKey===t.node.id),v=ne(()=>{const o=t.indent;if(typeof o=="function")try{return o(t.node)??18}catch{return 18}return o??18}),S=o=>{t.node.isDisabled||!t.draggable||(r.value=!0,s("drag-start",t.node,o))},_=o=>{t.draggable&&s("drag-enter",t.node,o)},x=o=>{t.draggable&&s("drag-leave",t.node,o)},R=o=>{t.draggable&&s("drag-over",t.node,o)},u=o=>{r.value=!1,s("drag-end",t.node,o)},m=o=>{t.draggable&&s("drop",t.node,o)};return(o,y)=>(B(),Q("div",{class:Se(["vue-virtual-tree-node",{"is-expanded":e.node.isExpanded,"is-checked":e.node.isChecked,"is-disabled":e.node.isDisabled,"is-leaf":d.value,"is-loading":e.node.isLoading,"is-dragging":r.value,"is-current":g.value,[`drop-${e.dropType}`]:e.dropType}]),style:Ve({paddingLeft:`${e.node.level*v.value}px`}),draggable:e.draggable&&!e.node.isDisabled,"data-node-id":e.node.id,onDragstart:S,onDragenter:_,onDragleave:x,onDragover:R,onDragend:u,onDrop:m},[H("div",Zt,[H("span",{class:Se(["vue-virtual-tree-node__expand-icon",{"is-leaf":d.value,"is-loading":e.node.isLoading}])},[e.node.isLoading?(B(),Q("span",ei,[U(o.$slots,"loading",{node:e.node,data:e.node.data},void 0,!0)])):U(o.$slots,"icon",{key:1,node:e.node,data:e.node.data},void 0,!0)],2),e.showCheckbox?(B(),Q("span",ti,[H("input",{type:"checkbox",checked:e.node.isChecked,indeterminate:e.node.isIndeterminate,disabled:e.node.isDisabled},null,8,ii)])):ve("",!0),H("span",si,[U(o.$slots,"default",{node:e.node,data:e.node.data},()=>[zt(kt(h.value),1)],!0)])])],46,Qt))}}),rt=(e,i)=>{const t=e.__vccOpts||e;for(const[s,r]of i)t[s]=r;return t},ni=rt(ri,[["__scopeId","data-v-4ce88321"]]);function li(e,i,t,s){const r=ne(()=>{const l=new Set;return i.value.forEach(f=>{f.isChecked&&l.add(f.id)}),l}),h=ne(()=>{const l=new Set;return i.value.forEach(f=>{f.isIndeterminate&&l.add(f.id)}),l}),d=F(null),g=F(null),v=()=>{i.value.forEach(l=>{l.isChecked=!1,l.isIndeterminate=!1}),e.defaultCheckedKeys&&e.defaultCheckedKeys.length>0&&e.defaultCheckedKeys.forEach(l=>{s(l)&&u(l,!0)})},S=()=>{if(e.currentNodeKey!==void 0){d.value=e.currentNodeKey;const l=t(e.currentNodeKey);g.value=l}},_=l=>{const f=[],T=t(l);if(!T)return f;const p=C=>{te(C,e.props).forEach(b=>{const L=q(b,e.props);f.push(L),p(b)})};return p(T),f},x=()=>{h.value.clear();const l=new Set(i.value.map(f=>f.id));for(const f of l){const T=_(f);if(T.length===0)continue;const p=T.filter(C=>r.value.has(C));p.length>0&&p.length<T.length&&h.value.add(f)}},R=(l,f)=>{l.isChecked=f,l.isIndeterminate=!1;const T=(C,N)=>{C.children&&C.children.forEach(b=>{b.isChecked=N,b.isIndeterminate=!1,T(b,N)})};T(l,f);const p=C=>{const N=C.parentId;if(N!==null){const b=s(N);if(b){const L=b.children||[],E=L.filter(W=>W.isChecked).length,V=L.filter(W=>W.isIndeterminate).length;E===L.length?(b.isChecked=!0,b.isIndeterminate=!1):E===0&&V===0?(b.isChecked=!1,b.isIndeterminate=!1):(b.isChecked=!1,b.isIndeterminate=!0),p(b)}}};p(l)},u=(l,f,T)=>{const p=s(l);if(!p)return;T??e.checkStrictly??!1?(p.isChecked=f,p.isIndeterminate=!1):R(p,f)},m=l=>{const f=r.value.has(l);u(l,!f)},o=(l,f=null)=>{d.value=l,g.value=f},y=(l=!1,f=!1)=>{const T=[],p=f?new Set([...r.value,...h.value]):r.value;for(const C of p){const N=t(C);N&&(l?te(N,e.props).length===0&&T.push(N):T.push(N))}return T},$=(l=!1)=>l?y(!0).map(T=>q(T,e.props)):Array.from(r.value),w=(l,f=!1)=>{r.value.clear(),l.filter(p=>f?he(p,e.props):!0).map(p=>q(p,e.props)).forEach(p=>{u(p,!0)}),e.checkStrictly||x()},k=(l,f=!1)=>{r.value.clear(),(f?l.filter(p=>{const C=t(p);return C&&he(C,e.props)}):l).forEach(p=>{u(p,!0)}),e.checkStrictly||x()};return S(),me(()=>e.currentNodeKey,l=>{l!==void 0&&o(l,t(l))}),{checkedKeys:r,halfCheckedKeys:h,selectedKey:d,currentNode:g,initNodeChecked:v,setNodeChecked:u,toggleNodeChecked:m,setCurrentNode:o,getCheckedNodes:y,getCheckedKeys:$,setCheckedNodes:w,setCheckedKeys:k,updateHalfCheckedKeys:x}}function ai(e,i,t,s){const r=F(new Set),h=()=>{if(e.defaultExpandAll){const u=Jt(e.data,e.props);r.value=new Set(u)}else e.defaultExpandedKeys&&e.defaultExpandedKeys.length>0?r.value=new Set(e.defaultExpandedKeys):r.value=new Set},d=u=>{const m=[];return u.children&&u.children.forEach(o=>{m.push(o),o.isExpanded&&m.push(...d(o))}),m},g=u=>{if(typeof u.visibleIndex!="number")return;const m=d(u);m.length!==0&&(t.value.splice(u.visibleIndex+1,0,...m),s())},v=u=>{if(typeof u.visibleIndex!="number")return;const m=d(u);m.length!==0&&(t.value.splice(u.visibleIndex+1,m.length),s())},S=u=>{e.accordion&&i.value.filter(o=>o.parentId===u.parentId&&o.id!==u.id&&o.isExpanded).forEach(o=>{o.isExpanded=!1,r.value.delete(o.id),v(o)}),u.isExpanded=!0,r.value.add(u.id),g(u)},_=(u,m)=>{u.isExpanded=m,r.value.delete(u.id),u.children&&u.children.forEach(o=>{_(o,m)})},x=u=>{v(u),_(u,!1)};return{expandedKeys:r,initExpandedKeys:h,expandNode:S,collapseNode:x,toggleNode:u=>{u.isExpanded?x(u):S(u)}}}function ze(e){if(e.length<=1)return e;const i=Math.floor(e.length/2),t=ze(e.slice(0,i)),s=ze(e.slice(i));return oi(t,s)}function oi(e,i){const t=[];let s=0,r=0;for(;s<e.length&&r<i.length;)e[s].index<=i[r].index?(t.push(e[s]),s++):(t.push(i[r]),r++);for(;s<e.length;)t.push(e[s]),s++;for(;r<i.length;)t.push(i[r]),r++;return t}function di(e,i,t,s,r,h,d,g){const v=()=>{const m=i.value.filter($=>$.parentId===null),o=[],y=$=>{o.push($),$.isExpanded&&$.children&&$.children.forEach(w=>y(w))};m.forEach($=>y($)),g(o)},S=(m,o)=>m?Me(o,e.props).toLowerCase().includes(m.toLowerCase()):!0,_=m=>({...m,children:void 0}),x=F(""),R=m=>(x.value=m,s.value=[],r.value=new Map,m?(h.value=!0,d.value.clear(),new Promise(async o=>{const y=e.filterNodeMethod||S,$=new Map;i.value.forEach(k=>{if(y(m,k.data)){$.has(k.id)||$.set(k.id,_(k));let l=k.parentId;for(;l;){const f=t.value.get(l);f&&!$.has(l)&&$.set(l,_(f)),l=(f==null?void 0:f.parentId)||null}}}),$.forEach(k=>{r.value.set(k.id,k);const l=[];$.forEach(f=>{f.parentId===k.id&&l.push(f)}),l.length>0?(k.children=ze(l),k.isExpanded=!0,d.value.add(k.id)):(k.children=void 0,k.isLeaf=!0)});const w=ze(Array.from($.values()));g(w),s.value=w,o(void 0)})):(h.value=!1,i.value.forEach(o=>{o.isLeaf||(o.isExpanded=!0,d.value.add(o.id))}),v(),Promise.resolve()));return{filterText:x,filter:R,clearFilter:()=>{R("")}}}function ci(e,i){const t=F(null),s=F(null),r=F(null),h=u=>!0,d=(u,m,o,y)=>{if(o==="inner"){const $=q(u,y.props),w=k=>q(k,y.props)===$?!0:te(k,y.props).some(f=>w(f));return!w(m)}return!0};return{draggingNode:t,dropNode:s,dropType:r,handleDragStart:(u,m)=>{t.value=u,m.dataTransfer&&(m.dataTransfer.effectAllowed="move")},handleDragEnter:(u,m)=>{if(!t.value)return;const o=i(t.value.id),y=i(u.id);if(!o||!y||!(e.allowDrag||h)(o))return;s.value=u;const w=m.currentTarget.getBoundingClientRect(),k=m.clientY-w.top,l=w.height,f=l/3;if(k<f?r.value="prev":k>l-f?r.value="next":r.value="inner",!(e.allowDrop||((p,C,N)=>d(p,C,N,e)))(o,y,r.value)){r.value=null;return}m.preventDefault()},handleDragLeave:(u,m)=>{var y;const o=m.relatedTarget;o&&m.currentTarget.contains(o)||((y=s.value)==null?void 0:y.id)===u.id&&(s.value=null,r.value=null)},handleDragOver:(u,m)=>{if(!t.value||!s.value||s.value.id!==u.id)return;const o=i(t.value.id),y=i(u.id);if(!o||!y)return;const $=m.currentTarget.getBoundingClientRect(),w=m.clientY-$.top,k=$.height,l=k/3;let f;if(w<l?f="prev":w>k-l?f="next":f="inner",!(e.allowDrop||((p,C,N)=>d(p,C,N,e)))(o,y,f)){r.value=null,m.preventDefault();return}r.value=f,m.preventDefault()},handleDragEnd:(u,m)=>{t.value=null,s.value=null,r.value=null},handleDrop:(u,m)=>{if(!t.value||!s.value||r.value===null)return;const o=i(t.value.id),y=i(u.id);if(!o||!y||!(e.allowDrop||((k,l,f)=>d(k,l,f,e)))(o,y,r.value))return;t.value=null,s.value=null;const w=r.value;return r.value=null,{draggingNode:o,dropNode:y,dropType:w}}}}function ui(e,i){const t=F([]),s=F(e.data),r=F(new Map),h=F([]),d=F([]),g=F(new Map),v=F(!1),S=ne(()=>v.value?d.value:t.value),_=ne(()=>v.value?g.value:r.value),x=()=>{h.value.forEach((I,Y)=>{I.visibleIndex=Y})},R=I=>{h.value=I,x()},u=I=>{const Y=_.value.get(I);return Y?Y.data:null},m=I=>_.value.get(I)||null,{checkedKeys:o,halfCheckedKeys:y,selectedKey:$,currentNode:w,toggleNodeChecked:k,setCurrentNode:l,getCheckedNodes:f,getCheckedKeys:T,setCheckedNodes:p,setCheckedKeys:C,initNodeChecked:N}=li(e,t,u,m),{expandNode:b,collapseNode:L,expandedKeys:E,initExpandedKeys:V}=ai(e,S,h,x),{filter:W}=di(e,t,r,d,g,v,E,R),le=ci(e,u),K=(I,Y=0,oe=null,n=0,a=!0,c)=>{const z=new Map,D=[];function O(X,M=0,P=null,j=0,re=!0,_e=[],J){const Ke=[];let nt=X.length;for(let Ce=0;Ce<nt;Ce++){j++;const fe=X[Ce],Ie=q(fe,J),ge=te(fe,J),Pe=E.value.has(Ie),lt=he(fe,J),de={id:Ie,data:fe,level:M,parentId:(P==null?void 0:P.id)||null,index:j,isExpanded:Pe,isDisabled:Xt(fe,J),isLeaf:lt,isLoading:!1,isLoaded:!1,isChecked:!1,rawChildren:ge.length>0?ge:void 0};if(Ke.push(de),_e.push(de),re&&D.push(de),ge.length>0){const{nodes:at,index:ot}=O(ge,M+1,de,j,Pe&&re,_e,J);de.children=at,j=ot}z.set(Ie,de)}return{nodes:Ke,index:j}}const A=[],{nodes:G}=O(I,Y,oe,n,a,A,c);return{nodes:G,flatNodes:A,nodeMap:z,visibleNodes:D}};let se=!1;const we=()=>{if(se)return;se=!0;const{flatNodes:I,nodeMap:Y,visibleNodes:oe}=K(s.value,0,null,0,!0,e.props);t.value=I,r.value=Y,R(oe),se=!1},De=(I,Y)=>{const{nodes:oe,flatNodes:n,nodeMap:a}=K(Y,I.level+1,I,I.index+1,!0,e.props);I.children=oe,a.forEach((c,z)=>{r.value.set(z,c)}),t.value.splice(I.index+1,0,...n),requestAnimationFrame(()=>{for(let c=I.index+n.length;c<t.value.length;c++){const z=t.value[c];z.index=c}})},Z={needEmit:!0,resetExpanded:!0,resetChecked:!0};me(()=>e.data,I=>{s.value=I,Z.needEmit=!0,ie()},{deep:!0}),me(()=>[e.defaultExpandedKeys,e.defaultExpandAll],()=>{Z.resetExpanded=!0,ie()},{deep:!0,immediate:!1}),me(()=>e.defaultCheckedKeys,()=>{Z.resetChecked=!0,ie()},{deep:!0,immediate:!1});let ae=null;const ie=()=>{ae&&clearTimeout(ae),ae=setTimeout(()=>{Z.resetExpanded&&V(),we(),Z.resetChecked&&N(),Z.needEmit&&ke(()=>{i("node-generated")}),Z.needEmit=!1,Z.resetExpanded=!1,Z.resetChecked=!1,ae=null},5)};return ie(),{flatTree:t,visibleNodes:h,expandedKeys:E,checkedKeys:o,rawData:s,getNodeData:u,getFlatNode:m,regenerateFlatTree:ie,flattenTree:K,insertFlatTree:De,halfCheckedKeys:y,selectedKey:$,currentNode:w,toggleNodeChecked:k,setCurrentNode:l,getCheckedNodes:f,getCheckedKeys:T,setCheckedNodes:p,setCheckedKeys:C,expandNode:b,collapseNode:L,dragState:le,filter:W}}const hi={key:0,class:"vue-virtual-tree__loading"},fi={class:"default-icon"},vi={key:0,viewBox:"0 0 1024 1024",width:"16",height:"16"},pi={key:1,class:"vue-virtual-tree__empty"},gi=Ye({name:"VirtualTree",__name:"VirtualTree",props:{data:{default:()=>[]},props:{default:()=>({})},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1},defaultExpandedKeys:{default:()=>[]},defaultCheckedKeys:{default:()=>[]},currentNodeKey:{},expandOnClickNode:{type:Boolean,default:!0},lazy:{type:Boolean,default:!1},load:{},filterNodeMethod:{},accordion:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrop:{},allowDrag:{},itemSize:{default:32},height:{default:"100%"},indent:{type:[Number,Function],default:18},loading:{type:Boolean,default:!1}},emits:["node-click","node-check","node-expand","node-collapse","current-change","node-drag-start","node-drag-enter","node-drag-leave","node-drag-over","node-drag-end","node-drop","node-generated"],setup(e,{expose:i,emit:t}){const s=e,r=t,{visibleNodes:h,rawData:d,getNodeData:g,getFlatNode:v,regenerateFlatTree:S,insertFlatTree:_,checkedKeys:x,halfCheckedKeys:R,selectedKey:u,currentNode:m,toggleNodeChecked:o,setCurrentNode:y,getCheckedNodes:$,getCheckedKeys:w,setCheckedNodes:k,setCheckedKeys:l,expandNode:f,collapseNode:T,dragState:p,filter:C}=ui(s,r),N=F(null),b=n=>{const a=n.target;if(!a)return null;const c=a.closest("[data-node-id]");if(!c)return null;const z=c.getAttribute("data-node-id");if(!z)return null;const D=isNaN(Number(z))?z:Number(z);return v(D)},L=n=>{const a=b(n);if(!a)return;const c=n.target;if(!c)return;const z=c.closest(".vue-virtual-tree-node__expand-icon"),D=c.closest(".vue-virtual-tree-node__checkbox"),O=c.closest(".vue-virtual-tree-node__content");D?le(a):z?a.isExpanded?W(a):V(a):O&&(E(a,n),s.expandOnClickNode&&!he(a.data,s.props)&&(a.isExpanded?W(a):V(a)))},E=(n,a)=>{n.isDisabled||(y(n.id,n.data),r("current-change",n.data,I(n)),r("node-click",n.data,I(n),a))},V=async n=>{if(!n.isDisabled){if(s.lazy&&!n.isLoaded&&s.load){let a=function(){n.isLoading=!1,n.isLoaded=!0};n.isLoading=!0,n.isLoaded=!1;try{await new Promise(c=>{s.load(n.data,z=>{z&&z.length>0&&_(n,z),a(),c()})})}catch(c){a(),console.error("Lazy load error:",c)}}f(n),r("node-expand",n.data,I(n))}},W=n=>{n.isDisabled||(T(n),r("node-collapse",n.data,I(n)))},le=n=>{if(n.isDisabled)return;o(n.id);const a=$(),c=w(),z=$(!1,!0).filter(O=>{const A=q(O,s.props);return R.value.has(A)&&!x.value.has(A)}),D=Array.from(R.value).filter(O=>!x.value.has(O));r("node-check",n.data,{checkedKeys:c,checkedNodes:a,halfCheckedKeys:D,halfCheckedNodes:z})},K=(n,a)=>{p.handleDragStart(n,a),r("node-drag-start",n.data,a)},se=(n,a)=>{var c,z,D;p.handleDragEnter(n,a),((z=(c=p.dropNode)==null?void 0:c.value)==null?void 0:z.id)===n.id&&((D=p.draggingNode)!=null&&D.value)&&r("node-drag-enter",p.draggingNode.value.data,a,n.data)},we=(n,a)=>{var c;p.handleDragLeave(n,a),(c=p.draggingNode)!=null&&c.value&&r("node-drag-leave",p.draggingNode.value.data,a,n.data)},De=(n,a)=>{var c,z,D;p.handleDragOver(n,a),((z=(c=p.dropNode)==null?void 0:c.value)==null?void 0:z.id)===n.id&&((D=p.draggingNode)!=null&&D.value)&&r("node-drag-over",p.draggingNode.value.data,a,n.data)},Z=(n,a)=>{var c;(c=p.draggingNode)!=null&&c.value&&r("node-drag-end",p.draggingNode.value.data,a),p.handleDragEnd(n,a)},ae=(n,a)=>{const c=p.handleDrop(n,a);c&&r("node-drop",c.draggingNode,c.dropNode,c.dropType,a)},ie=new WeakMap,I=n=>{if(ie.has(n))return ie.get(n);let a=null,c=null;const z=()=>{if(a!==null)return a;if(n.parentId===null)return a=null,null;const M=v(n.parentId);return M?(a=I(M),a):(a=null,null)},D=()=>(c!==null||(c=h.value.filter(P=>P.parentId===n.id).map(P=>I(P))),c),O=()=>h.value.filter(P=>P.parentId===n.parentId&&P.id!==n.id).map(P=>I(P)),A=()=>{const M=[],P=new Set,j=re=>{h.value.filter(J=>J.parentId===re).forEach(J=>{P.has(J.id)||(P.add(J.id),M.push(I(J)),j(J.id))})};return j(n.id),M},G=()=>{const M=[],P=new Set;let j=n.parentId;for(;j!==null&&!P.has(j);){P.add(j);const re=v(j);if(re)M.push(I(re)),j=re.parentId;else break}return M},X={data:n.data,key:n.id,level:n.level,get parent(){return z()},get children(){return D()},expanded:n.isExpanded,checked:n.isChecked||!1,disabled:n.isDisabled||!1,isLeaf:he(n.data,s.props),getLabel:()=>Me(n.data,s.props),getData:()=>n.data,getParent:z,getChildren:D,getSiblings:O,getAllChildren:A,getAllParents:G};return ie.set(n,X),X},Y=n=>{const a=v(n);return a?I(a):null};return i({getCheckedNodes:(n,a)=>$(n,a),getCheckedKeys:n=>w(n),setCheckedNodes:(n,a)=>{k(n,a)},setCheckedKeys:(n,a)=>{l(n,a)},getCurrentNode:()=>m.value,setCurrentNode:n=>{if(typeof n=="string"||typeof n=="number"){const a=g(n);y(n,a)}else{const a=q(n,s.props);y(a,n)}},getCurrentKey:()=>u.value,setCurrentKey:n=>{y(n,g(n))},filter:n=>C(n).then(()=>{ke(()=>{var a,c;(a=N.value)==null||a.scrollToItem(0),(c=N.value)==null||c.forceUpdate()})}),getNode:n=>Y(n),remove:n=>{if(!Te(d.value,n,s.props))return;const c=(z,D)=>{for(let O=0;O<z.length;O++){if(q(z[O],s.props)===D)return z.splice(O,1),!0;const A=te(z[O],s.props);if(A.length>0&&c(A,D))return!0}return!1};c(d.value,n),S()},append:(n,a)=>{if(a===void 0)d.value.push(n);else{const c=Te(d.value,a,s.props);if(c){const D=(s.props||{}).children||"children";c[D]||(c[D]=[]),c[D].push(n)}}S()},insertBefore:(n,a)=>{const c=(z,D,O)=>{for(let A=0;A<z.length;A++){if(q(z[A],s.props)===D)return z.splice(A,0,O),!0;const G=te(z[A],s.props);if(G.length>0&&c(G,D,O))return!0}return!1};c(d.value,a,n),S()},insertAfter:(n,a)=>{const c=(z,D,O)=>{for(let A=0;A<z.length;A++){if(q(z[A],s.props)===D)return z.splice(A+1,0,O),!0;const G=te(z[A],s.props);if(G.length>0&&c(G,D,O))return!0}return!1};c(d.value,a,n),S()},updateKeyChildren:(n,a)=>{const c=Te(d.value,n,s.props);if(c){const D=(s.props||{}).children||"children";c[D]=a,S()}},nodeGenerated:()=>{r("node-generated")}}),(n,a)=>(B(),Q("div",{class:"vue-virtual-tree",style:Ve({height:typeof e.height=="number"?`${e.height}px`:e.height}),onClick:L},[e.loading?U(n.$slots,"tree-loading",{key:0},()=>[e.loading?(B(),Q("div",hi,[...a[0]||(a[0]=[H("span",{class:"vue-virtual-tree-loading-text"},"加载中...",-1)])])):ve("",!0)],!0):(B(),Q(je,{key:1},[e.data.length>0?(B(),ue(ce(Le),{key:0,ref_key:"dynamicScrollerRef",ref:N,items:ce(h),"min-item-size":e.itemSize||32,class:"vue-virtual-tree__scroller"},{default:ee(({item:c,index:z,active:D})=>[We(ce(tt),{item:c,active:D,"data-index":z,class:"vue-virtual-tree__item"},{default:ee(()=>{var O,A,G;return[(B(),ue(ni,{node:c,key:c.id,props:s.props,"show-checkbox":e.showCheckbox,"expand-on-click-node":e.expandOnClickNode,draggable:e.draggable,indent:s.indent,"current-key":ce(u),"drop-type":((A=(O=ce(p).dropNode)==null?void 0:O.value)==null?void 0:A.id)===c.id?((G=ce(p).dropType)==null?void 0:G.value)??null:null,onDragStart:K,onDragEnter:se,onDragLeave:we,onDragOver:De,onDragEnd:Z,onDrop:ae},{default:ee(({node:X,data:M})=>[U(n.$slots,"default",{node:X,data:M},void 0,!0)]),loading:ee(({node:X,data:M})=>[U(n.$slots,"loading",{node:X,data:M},()=>[a[1]||(a[1]=H("svg",{class:"vue-virtual-tree-node__loading-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[H("g",{transform:"translate(12,12)"},[H("circle",{cx:"0",cy:"0",r:"8",fill:"none",stroke:"currentColor","stroke-width":"1",opacity:"0.2"}),H("g",{class:"vue-virtual-tree-loading-dots"},[H("circle",{cx:"0",cy:"-8",r:"2",fill:"currentColor"}),H("circle",{cx:"6.928",cy:"-4",r:"2",fill:"currentColor",opacity:"0.7"}),H("circle",{cx:"6.928",cy:"4",r:"2",fill:"currentColor",opacity:"0.4"})])])],-1))],!0)]),icon:ee(({node:X,data:M})=>[U(n.$slots,"icon",{node:X,data:M},()=>[H("span",fi,[X.isLeaf?ve("",!0):(B(),Q("svg",vi,[...a[2]||(a[2]=[H("path",{d:"M384 384l256 256-256 256z",fill:"currentColor"},null,-1)])]))])],!0)]),_:3},8,["node","props","show-checkbox","expand-on-click-node","draggable","indent","current-key","drop-type"]))]}),_:2},1032,["item","active","data-index"])]),_:3},8,["items","min-item-size"])):(B(),Q("div",pi,[U(n.$slots,"empty",{},()=>[a[3]||(a[3]=H("span",null,"暂无数据",-1))],!0)]))],64))],4))}}),yi=rt(gi,[["__scopeId","data-v-6a1c7ab9"]]);export{yi as V,rt as _};
