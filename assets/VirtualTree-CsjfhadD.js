import{n as ze,p as st,k as rt,l as nt,m as ce,o as F,q as lt,s as ot,x as Pe,y as at,w as dt,c as J,f as ve,e as Fe,z as U,h as Z,F as Be,g as ct,A as Le,B as Ue,C as ut,D as Ee,E as Se,G as ht,H as ft,I as vt,d as He,r as Q,J as fe,a as H,b as pt,t as gt,K as me,u as he}from"./index-L1AIuwbq.js";function mt(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var i=e.indexOf("Trident/");if(i>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):-1}let ye;function Ce(){Ce.init||(Ce.init=!0,ye=mt()!==-1)}var ke={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ce(),ze(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",ye&&this.$el.appendChild(e),e.data="about:blank",ye||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!ye&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const yt=nt();st("data-v-b329ee4c");const bt={class:"resize-observer",tabindex:"-1"};rt();const St=yt((e,t,i,s,r,h)=>(F(),ce("div",bt)));ke.render=St;ke.__scopeId="data-v-b329ee4c";ke.__file="src/components/ResizeObserver.vue";function be(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?be=function(t){return typeof t}:be=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function $t(e,t,i){return t&&kt(e.prototype,t),e}function Ke(e){return wt(e)||Dt(e)||_t(e)||It()}function wt(e){if(Array.isArray(e))return xe(e)}function Dt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _t(e,t){if(e){if(typeof e=="string")return xe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xe(e,t)}}function xe(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function It(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ct(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function xt(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,r,h,a=function(v){for(var m=arguments.length,$=new Array(m>1?m-1:0),x=1;x<m;x++)$[x-1]=arguments[x];if(h=$,!(s&&v===r)){var w=i.leading;typeof w=="function"&&(w=w(v,r)),(!s||v!==r)&&w&&e.apply(void 0,[v].concat(Ke(h))),r=v,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[v].concat(Ke(h))),s=0},t)}};return a._clear=function(){clearTimeout(s),s=null},a}function We(e,t){if(e===t)return!0;if(be(e)==="object"){for(var i in e)if(!We(e[i],t[i]))return!1;return!0}return!1}var Nt=function(){function e(t,i,s){zt(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(i,s)}return $t(e,[{key:"createObserver",value:function(i,s){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Ct(i),this.callback=function(g,v){r.options.callback(g,v),g&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var h=this.options.throttleOptions||{},a=h.leading;this.callback=xt(this.callback,this.options.throttle,{leading:function(v){return a==="both"||a==="visible"&&v||a==="hidden"&&!v}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(g){var v=g[0];if(g.length>1){var m=g.find(function(x){return x.isIntersecting});m&&(v=m)}if(r.callback){var $=v.isIntersecting&&v.intersectionRatio>=r.threshold;if($===r.oldResult)return;r.oldResult=$,r.callback($,v)}},this.options.intersection),ze(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function je(e,t,i){var s=t.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Nt(e,s,i);e._vue_visibilityState=r}}function Tt(e,t,i){var s=t.value,r=t.oldValue;if(!We(s,r)){var h=e._vue_visibilityState;if(!s){qe(e);return}h?h.createObserver(s,i):je(e,{value:s},i)}}function qe(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var Et={beforeMount:je,updated:Tt,unmounted:qe};function Ot(e){return{all:e=e||new Map,on:function(t,i){var s=e.get(t);s&&s.push(i)||e.set(t,[i])},off:function(t,i){var s=e.get(t);s&&s.splice(s.indexOf(i)>>>0,1)},emit:function(t,i){(e.get(t)||[]).slice().map(function(s){s(i)}),(e.get("*")||[]).slice().map(function(s){s(t,i)})}}}var At={itemsLimit:1e3},Vt=/(auto|scroll)/;function Ye(e,t){return e.parentNode===null?t:Ye(e.parentNode,t.concat([e]))}var _e=function(t,i){return getComputedStyle(t,null).getPropertyValue(i)},Rt=function(t){return _e(t,"overflow")+_e(t,"overflow-y")+_e(t,"overflow-x")},Lt=function(t){return Vt.test(Rt(t))};function Me(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=Ye(e.parentNode,[]),i=0;i<t.length;i+=1)if(Lt(t[i]))return t[i];return document.scrollingElement||document.documentElement}}function Ne(e){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(e)}var Ge={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Xe(){return this.items.length&&Ne(this.items[0])!=="object"}var Te=!1;if(typeof window<"u"){Te=!1;try{var Kt=Object.defineProperty({},"passive",{get:function(){Te=!0}});window.addEventListener("test",null,Kt)}catch{}}let Mt=0;var Oe={name:"RecycleScroller",components:{ResizeObserver:ke},directives:{ObserveVisibility:Et},props:{...Ge,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,i=this.sizeField,s=this.minItemSize;let r=1e4,h=0,a;for(let g=0,v=t.length;g<v;g++)a=t[g][i]||s,a<r&&(r=a),h+=a,e[g]={accumulator:h,size:a};return this.$_computedMinItemSize=r,e}return[]},simpleArray:Xe,itemIndexByKey(){const{keyField:e,items:t}=this,i={};for(let s=0,r=t.length;s<r;s++)i[t[s][e]]=s;return i}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,i,s,r){const h=lt({id:Mt++,index:t,used:!0,key:s,type:r}),a=ot({item:i,position:0,nr:h});return e.push(a),a},unuseView(e,t=!1){const i=this.$_unusedViews,s=e.nr.type;let r=i.get(s);r||(r=[],i.set(s,r)),r.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:i}=this.updateVisibleItems(!1,!0);i||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const i=this.itemSize,s=this.gridItems||1,r=this.itemSecondarySize||i,h=this.$_computedMinItemSize,a=this.typeField,g=this.simpleArray?null:this.keyField,v=this.items,m=v.length,$=this.sizes,x=this.$_views,w=this.$_unusedViews,c=this.pool,u=this.itemIndexByKey;let p,b,K,N,d;if(!m)p=b=N=d=K=0;else if(this.$_prerender)p=N=0,b=d=Math.min(this.prerender,v.length),K=null;else{const S=this.getScroll();if(t){let T=S.start-this.$_lastUpdateScrollPosition;if(T<0&&(T=-T),i===null&&T<h||T<i)return{continuous:!0}}this.$_lastUpdateScrollPosition=S.start;const L=this.buffer;S.start-=L,S.end+=L;let O=0;if(this.$refs.before&&(O=this.$refs.before.scrollHeight,S.start-=O),this.$refs.after){const T=this.$refs.after.scrollHeight;S.end+=T}if(i===null){let T,ee=0,W=m-1,M=~~(m/2),te;do te=M,T=$[M].accumulator,T<S.start?ee=M:M<m-1&&$[M+1].accumulator>S.start&&(W=M),M=~~((ee+W)/2);while(M!==te);for(M<0&&(M=0),p=M,K=$[m-1].accumulator,b=M;b<m&&$[b].accumulator<S.end;b++);for(b===-1?b=v.length-1:(b++,b>m&&(b=m)),N=p;N<m&&O+$[N].accumulator<S.start;N++);for(d=N;d<m&&O+$[d].accumulator<S.end;d++);}else{p=~~(S.start/i*s);const T=p%s;p-=T,b=Math.ceil(S.end/i*s),N=Math.max(0,Math.floor((S.start-O)/i*s)),d=Math.floor((S.end-O)/i*s),p<0&&(p=0),b>m&&(b=m),N<0&&(N=0),d>m&&(d=m),K=Math.ceil(m/s)*i}}b-p>At.itemsLimit&&this.itemsLimitError(),this.totalSize=K;let o;const z=p<=this.$_endIndex&&b>=this.$_startIndex;if(z)for(let S=0,L=c.length;S<L;S++)o=c[S],o.nr.used&&(e&&(o.nr.index=u[o.item[g]]),(o.nr.index==null||o.nr.index<p||o.nr.index>=b)&&this.unuseView(o));const D=z?null:new Map;let y,I,C;for(let S=p;S<b;S++){y=v[S];const L=g?y[g]:y;if(L==null)throw new Error(`Key is ${L} on item (keyField is '${g}')`);if(o=x.get(L),!i&&!$[S].size){o&&this.unuseView(o);continue}I=y[a];let O=w.get(I),T=!1;if(!o)z?O&&O.length?o=O.pop():o=this.addView(c,S,y,L,I):(C=D.get(I)||0,(!O||C>=O.length)&&(o=this.addView(c,S,y,L,I),this.unuseView(o,!0),O=w.get(I)),o=O[C],D.set(I,C+1)),x.delete(o.nr.key),o.nr.used=!0,o.nr.index=S,o.nr.key=L,o.nr.type=I,x.set(L,o),T=!0;else if(!o.nr.used&&(o.nr.used=!0,T=!0,O)){const ee=O.indexOf(o);ee!==-1&&O.splice(ee,1)}o.item=y,T&&(S===v.length-1&&this.$emit("scroll-end"),S===0&&this.$emit("scroll-start")),i===null?(o.position=$[S-1].accumulator,o.offset=0):(o.position=Math.floor(S/s)*i,o.offset=S%s*r)}return this.$_startIndex=p,this.$_endIndex=b,this.emitUpdate&&this.$emit("update",p,b,N,d),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:z}},getListenerTarget(){let e=Me(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,i=t==="vertical";let s;if(this.pageMode){const r=e.getBoundingClientRect(),h=i?r.height:r.width;let a=-(i?r.top:r.left),g=i?window.innerHeight:window.innerWidth;a<0&&(g+=a,a=0),a+g>h&&(g=h-a),s={start:a,end:a+g}}else i?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Te?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const i=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/i)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let i,s,r;if(this.pageMode){const h=Me(this.$el),a=h.tagName==="HTML"?0:h[t.scroll],g=h.getBoundingClientRect(),m=this.$el.getBoundingClientRect()[t.start]-g[t.start];i=h,s=t.scroll,r=e+a+m}else i=this.$el,s=t.scroll,r=e;i[s]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const Pt={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Ft={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Bt(e,t,i,s,r,h){const a=Pe("ResizeObserver"),g=at("observe-visibility");return dt((F(),J("div",{class:Se(["vue-recycle-scroller",{ready:r.ready,"page-mode":i.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...v)=>h.handleScroll&&h.handleScroll(...v))},[e.$slots.before?(F(),J("div",Pt,[U(e.$slots,"before")],512)):ve("v-if",!0),(F(),ce(Le(i.listTag),{ref:"wrapper",style:Ee({[e.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:Se(["vue-recycle-scroller__item-wrapper",i.listClass])},{default:Z(()=>[(F(!0),J(Be,null,ct(r.pool,v=>(F(),ce(Le(i.itemTag),Ue({key:v.nr.id,style:r.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${v.position}px) translate${e.direction==="vertical"?"X":"Y"}(${v.offset}px)`,width:i.gridItems?`${e.direction==="vertical"&&i.itemSecondarySize||i.itemSize}px`:void 0,height:i.gridItems?`${e.direction==="horizontal"&&i.itemSecondarySize||i.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[i.itemClass,{hover:!i.skipHover&&r.hoverKey===v.nr.key}]]},ut(i.skipHover?{}:{mouseenter:()=>{r.hoverKey=v.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:Z(()=>[U(e.$slots,"default",{item:v.item,index:v.nr.index,active:v.nr.used})]),_:2},1040,["style","class"]))),128)),U(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(F(),J("div",Ft,[U(e.$slots,"after")],512)):ve("v-if",!0),Fe(a,{onNotify:h.handleResize},null,8,["onNotify"])],34)),[[g,h.handleVisibilityChange]])}Oe.render=Bt;Oe.__file="src/components/RecycleScroller.vue";var Ae={name:"DynamicScroller",components:{RecycleScroller:Oe},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const t of e)if(t.target&&t.target.$_vs_onResize){let i,s;if(t.borderBoxSize){const r=t.borderBoxSize[0];i=r.inlineSize,s=r.blockSize}else i=t.contentRect.width,s=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,i,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...Ge,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:Xe,itemsWithSize(){const e=[],{items:t,keyField:i,simpleArray:s}=this,r=this.vscrollData.sizes,h=t.length;for(let a=0;a<h;a++){const g=t[a],v=s?a:g[i];let m=r[v];typeof m>"u"&&!this.$_undefinedMap[v]&&(m=0),e.push({item:g,id:v,size:m})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const i=this.$el.scrollTop;let s=0,r=0;const h=Math.min(e.length,t.length);for(let g=0;g<h&&!(s>=i);g++)s+=t[g].size||this.minItemSize,r+=e[g].size||this.minItemSize;const a=r-s;a!==0&&(this.$el.scrollTop+=a)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=Ot()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const i=this.simpleArray?t??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[i]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};function Ut(e,t,i,s,r,h){const a=Pe("RecycleScroller");return F(),ce(a,Ue({ref:"scroller",items:h.itemsWithSize,"min-item-size":i.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:h.onScrollerResize,onVisible:h.onScrollerVisible}),{default:Z(({item:g,index:v,active:m})=>[U(e.$slots,"default",ht(ft({item:g.item,index:v,active:m,itemWithSize:g})))]),before:Z(()=>[U(e.$slots,"before")]),after:Z(()=>[U(e.$slots,"after")]),empty:Z(()=>[U(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Ae.render=Ut;Ae.__file="src/components/DynamicScroller.vue";var Je={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const i=this.vscrollData.sizes[t],s=this.vscrollData.sizes[e];i!=null&&i!==s&&this.applySize(i)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const t=this.$el.offsetWidth,i=this.$el.offsetHeight;this.applyWidthHeight(t,i)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const i=~~(this.vscrollParent.direction==="vertical"?t:e);i&&this.size!==i&&this.applySize(i)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,i){this.id===e&&this.applyWidthHeight(t,i)}},render(){return vt(this.tag,this.$slots.default())}};Je.__file="src/components/DynamicScrollerItem.vue";const pe={id:"id",children:"children",label:"label",disabled:"disabled",isLeaf:"isLeaf"};function q(e,t={}){const i={...pe,...t};return e[i.id]??e.id??""}function Ve(e,t={}){const i={...pe,...t};return e[i.label]??e.label??""}function re(e,t={}){const i={...pe,...t};return e[i.children]??e.children??[]}function Ht(e,t={}){const i={...pe,...t};return e[i.disabled]??e.disabled??!1}function ue(e,t={}){const i={...pe,...t};return re(e,t).length>0?!1:e[i.isLeaf]!==void 0?e[i.isLeaf]??!1:!0}function Qe(e,t,i=null,s={}){for(const r of e){if(t(r,i)===!1)continue;const a=re(r,s);a.length>0&&Qe(a,t,r,s)}}function Ze(e,t,i={}){for(const s of e){if(t(s))return s;const r=re(s,i);if(r.length>0){const h=Ze(r,t,i);if(h)return h}}return null}function Ie(e,t,i={}){return Ze(e,s=>q(s,i)===t,i)}function Wt(e,t={}){const i=[];return Qe(e,s=>{i.push(q(s,t))},null,t),i}const jt=["draggable","data-node-id"],qt={class:"vue-virtual-tree-node__content"},Yt={key:0},Gt={key:0,class:"vue-virtual-tree-node__checkbox"},Xt=["checked","indeterminate","disabled"],Jt={class:"vue-virtual-tree-node__label"},Qt=He({__name:"TreeNode",props:{node:{},props:{},showCheckbox:{type:Boolean},expandOnClickNode:{type:Boolean},draggable:{type:Boolean},dropType:{},indent:{type:[Number,Function]}},emits:["drag-start","drag-enter","drag-leave","drag-over","drag-end","drop"],setup(e,{emit:t}){const i=e,s=t,r=Q(!1),h=fe(()=>Ve(i.node.data,i.props)),a=fe(()=>ue(i.node.data,i.props)),g=fe(()=>{const u=i.indent;if(typeof u=="function")try{return u(i.node)??18}catch{return 18}return u??18}),v=u=>{i.node.isDisabled||!i.draggable||(r.value=!0,s("drag-start",i.node,u))},m=u=>{i.draggable&&s("drag-enter",i.node,u)},$=u=>{i.draggable&&s("drag-leave",i.node,u)},x=u=>{i.draggable&&s("drag-over",i.node,u)},w=u=>{r.value=!1,s("drag-end",i.node,u)},c=u=>{i.draggable&&s("drop",i.node,u)};return(u,p)=>(F(),J("div",{class:Se(["vue-virtual-tree-node",{"is-expanded":e.node.isExpanded,"is-checked":e.node.isChecked,"is-disabled":e.node.isDisabled,"is-leaf":a.value,"is-loading":e.node.isLoading,"is-dragging":r.value,[`drop-${e.dropType}`]:e.dropType}]),style:Ee({paddingLeft:`${e.node.level*g.value}px`}),draggable:e.draggable&&!e.node.isDisabled,"data-node-id":e.node.id,onDragstart:v,onDragenter:m,onDragleave:$,onDragover:x,onDragend:w,onDrop:c},[H("div",qt,[H("span",{class:Se(["vue-virtual-tree-node__expand-icon",{"is-leaf":a.value,"is-loading":e.node.isLoading}])},[e.node.isLoading?(F(),J("span",Yt,[U(u.$slots,"loading",{node:e.node,data:e.node.data},void 0,!0)])):U(u.$slots,"icon",{key:1,node:e.node,data:e.node.data},void 0,!0)],2),e.showCheckbox?(F(),J("span",Gt,[H("input",{type:"checkbox",checked:e.node.isChecked,indeterminate:e.node.isIndeterminate,disabled:e.node.isDisabled},null,8,Xt)])):ve("",!0),H("span",Jt,[U(u.$slots,"default",{node:e.node,data:e.node.data},()=>[pt(gt(h.value),1)],!0)])])],46,jt))}}),et=(e,t)=>{const i=e.__vccOpts||e;for(const[s,r]of t)i[s]=r;return i},Zt=et(Qt,[["__scopeId","data-v-50e04bcd"]]);function ei(e,t,i){const s=fe(()=>{const d=new Set;return t.value.forEach(o=>{o.isChecked&&d.add(o.id)}),d}),r=fe(()=>{const d=new Set;return t.value.forEach(o=>{o.isIndeterminate&&d.add(o.id)}),d}),h=Q(null),a=Q(null),g=()=>{t.value.forEach(d=>{d.isChecked=!1,d.isIndeterminate=!1}),e.defaultCheckedKeys&&e.defaultCheckedKeys.length>0&&e.defaultCheckedKeys.forEach(d=>{t.value.find(z=>z.id===d)&&w(d,!0)})},v=()=>{if(e.currentNodeKey!==void 0){h.value=e.currentNodeKey;const d=i(e.currentNodeKey);a.value=d}},m=d=>{const o=[],z=i(d);if(!z)return o;const D=y=>{re(y,e.props).forEach(C=>{const S=q(C,e.props);o.push(S),D(C)})};return D(z),o},$=()=>{r.value.clear();const d=new Set(t.value.map(o=>o.id));for(const o of d){const z=m(o);if(z.length===0)continue;const D=z.filter(y=>s.value.has(y));D.length>0&&D.length<z.length&&r.value.add(o)}},x=(d,o)=>{d.isChecked=o,d.isIndeterminate=!1;const z=(y,I)=>{y.children&&y.children.forEach(C=>{C.isChecked=I,C.isIndeterminate=!1,z(C,I)})};z(d,o);const D=y=>{const I=y.parentId;if(I!==null){const C=t.value.find(S=>S.id===I);if(C){const S=t.value.filter(T=>T.parentId===I),L=S.filter(T=>T.isChecked).length,O=S.filter(T=>T.isIndeterminate).length;L===S.length?(C.isChecked=!0,C.isIndeterminate=!1):L===0&&O===0?(C.isChecked=!1,C.isIndeterminate=!1):(C.isChecked=!1,C.isIndeterminate=!0),D(C)}}};D(d)},w=(d,o,z)=>{const D=t.value.find(I=>I.id===d);if(!D)return;z??e.checkStrictly??!1?(D.isChecked=o,D.isIndeterminate=!1):x(D,o)},c=d=>{const o=s.value.has(d);w(d,!o)},u=(d,o=null)=>{h.value=d,a.value=o},p=(d=!1,o=!1)=>{const z=[],D=o?new Set([...s.value,...r.value]):s.value;for(const y of D){const I=i(y);I&&(d?re(I,e.props).length===0&&z.push(I):z.push(I))}return z},b=(d=!1)=>d?p(!0).map(z=>q(z,e.props)):Array.from(s.value),K=(d,o=!1)=>{s.value.clear(),d.filter(D=>o?ue(D,e.props):!0).map(D=>q(D,e.props)).forEach(D=>{w(D,!0)}),e.checkStrictly||$()},N=(d,o=!1)=>{s.value.clear(),(o?d.filter(D=>{const y=i(D);return y&&ue(y,e.props)}):d).forEach(D=>{w(D,!0)}),e.checkStrictly||$()};return v(),me(()=>e.currentNodeKey,d=>{d!==void 0&&u(d,i(d))}),{checkedKeys:s,halfCheckedKeys:r,selectedKey:h,currentNode:a,initNodeChecked:g,setNodeChecked:w,toggleNodeChecked:c,setCurrentNode:u,getCheckedNodes:p,getCheckedKeys:b,setCheckedNodes:K,setCheckedKeys:N,updateHalfCheckedKeys:$}}function ti(e,t,i,s){const r=Q(new Set),h=()=>{if(e.defaultExpandAll){const c=Wt(e.data,e.props);r.value=new Set(c)}else e.defaultExpandedKeys&&e.defaultExpandedKeys.length>0?r.value=new Set(e.defaultExpandedKeys):r.value=new Set},a=c=>{const u=[];return c.children&&c.children.forEach(p=>{u.push(p),p.isExpanded&&u.push(...a(p))}),u},g=c=>{if(typeof c.visibleIndex!="number")return;const u=a(c);u.length!==0&&(i.value.splice(c.visibleIndex+1,0,...u),s())},v=c=>{if(typeof c.visibleIndex!="number")return;const u=a(c);u.length!==0&&(i.value.splice(c.visibleIndex+1,u.length),s())},m=c=>{e.accordion&&t.value.filter(p=>p.parentId===c.parentId&&p.id!==c.id&&p.isExpanded).forEach(p=>{p.isExpanded=!1,r.value.delete(p.id),v(p)}),c.isExpanded=!0,r.value.add(c.id),g(c)},$=(c,u)=>{c.isExpanded=u,r.value.delete(c.id),c.children&&c.children.forEach(p=>{$(p,u)})},x=c=>{v(c),$(c,!1)};return{expandedKeys:r,initExpandedKeys:h,expandNode:m,collapseNode:x,toggleNode:c=>{c.isExpanded?x(c):m(c)}}}function ii(e,t,i,s,r){const h=()=>{const m=t.value.filter(w=>w.parentId===null),$=[],x=w=>{$.push(w),w.isExpanded&&w.children&&w.children.forEach(c=>x(c))};m.forEach(w=>x(w)),r($)},a=(m,$)=>m?Ve($,e.props).toLowerCase().includes(m.toLowerCase()):!0,g=m=>m?new Promise(async $=>{const x=e.filterNodeMethod||a,w=new Set;t.value.forEach(c=>{if(x(m,c.data)){w.add(c);let u=c.parentId;for(;u;){const p=i.value.get(u);p?(w.add(p),p.isExpanded=!0,s.value.add(p.id),u=p.parentId):u=null}}}),r(t.value.filter(c=>w.has(c))),$(void 0)}):(t.value.forEach($=>{$.isLeaf||($.isExpanded=!0,s.value.add($.id))}),h(),Promise.resolve());return{filter:g,clearFilter:()=>{g("")}}}function si(e,t){const i=Q(null),s=Q(null),r=Q(null),h=c=>!0,a=(c,u,p,b)=>{if(p==="inner"){const K=q(c,b.props),N=d=>q(d,b.props)===K?!0:re(d,b.props).some(z=>N(z));return!N(u)}return!0};return{draggingNode:i,dropNode:s,dropType:r,handleDragStart:(c,u)=>{i.value=c,u.dataTransfer&&(u.dataTransfer.effectAllowed="move")},handleDragEnter:(c,u)=>{if(!i.value)return;const p=t(i.value.id),b=t(c.id);if(!p||!b||!(e.allowDrag||h)(p))return;s.value=c;const N=u.currentTarget.getBoundingClientRect(),d=u.clientY-N.top,o=N.height,z=o/3;if(d<z?r.value="prev":d>o-z?r.value="next":r.value="inner",!(e.allowDrop||((y,I,C)=>a(y,I,C,e)))(p,b,r.value)){r.value=null;return}u.preventDefault()},handleDragLeave:(c,u)=>{var b;const p=u.relatedTarget;p&&u.currentTarget.contains(p)||((b=s.value)==null?void 0:b.id)===c.id&&(s.value=null,r.value=null)},handleDragOver:(c,u)=>{if(!i.value||!s.value||s.value.id!==c.id)return;const p=t(i.value.id),b=t(c.id);if(!p||!b)return;const K=u.currentTarget.getBoundingClientRect(),N=u.clientY-K.top,d=K.height,o=d/3;let z;if(N<o?z="prev":N>d-o?z="next":z="inner",!(e.allowDrop||((y,I,C)=>a(y,I,C,e)))(p,b,z)){r.value=null,u.preventDefault();return}r.value=z,u.preventDefault()},handleDragEnd:(c,u)=>{i.value=null,s.value=null,r.value=null},handleDrop:(c,u)=>{if(!i.value||!s.value||r.value===null)return;const p=t(i.value.id),b=t(c.id);if(!p||!b||!(e.allowDrop||((d,o,z)=>a(d,o,z,e)))(p,b,r.value))return;i.value=null,s.value=null;const N=r.value;return r.value=null,{draggingNode:p,dropNode:b,dropType:N}}}}function ri(e,t){const i=Q([]),s=Q([]),r=()=>{s.value.forEach((V,Y)=>{V.visibleIndex=Y})},h=V=>{s.value=V,r()},a=Q(e.data),g=Q(new Map),v=V=>{const Y=g.value.get(V);return Y?Y.data:null},m=V=>g.value.get(V)||null,{checkedKeys:$,halfCheckedKeys:x,selectedKey:w,currentNode:c,toggleNodeChecked:u,setCurrentNode:p,getCheckedNodes:b,getCheckedKeys:K,setCheckedNodes:N,setCheckedKeys:d,initNodeChecked:o}=ei(e,i,v),{expandNode:z,collapseNode:D,expandedKeys:y,initExpandedKeys:I}=ti(e,i,s,r),{filter:C}=ii(e,i,g,y,h),S=si(e,v),L=(V,Y=0,le=null,ae=0,oe=!0,P)=>{const ne=new Map,$e=[];function n(k,_=0,E=null,A=0,j=!0,G=[],R){const B=[];let ie=k.length;for(let se=0;se<ie;se++){let we=A+se;const X=k[se],De=q(X,R),ge=re(X,R),Re=y.value.has(De),tt=ue(X,R),de={id:De,data:X,level:_,parentId:(E==null?void 0:E.id)||null,index:we,isExpanded:Re,isDisabled:Ht(X,R),isLeaf:tt,isLoading:!1,isLoaded:!1,isChecked:!1,rawChildren:ge.length>0?ge:void 0};if(B.push(de),G.push(de),j&&$e.push(de),ge.length>0){const it=n(ge,_+1,de,we,Re&&j,G,R);de.children=it}ne.set(De,de)}return B}const l=[];return{nodes:n(V,Y,le,ae,oe,l,P),flatNodes:l,nodeMap:ne,visibleNodes:$e}};let O=!1;const T=()=>{if(O)return;O=!0;const{flatNodes:V,nodeMap:Y,visibleNodes:le}=L(a.value,0,null,0,!0,e.props);i.value=V,g.value=Y,h(le),O=!1},ee=(V,Y)=>{const{nodes:le,flatNodes:ae,nodeMap:oe}=L(Y,V.level+1,V,V.index+1,!0,e.props);V.children=le,oe.forEach((P,ne)=>{g.value.set(ne,P)}),i.value.splice(V.index+1,0,...ae),requestAnimationFrame(()=>{for(let P=V.index+ae.length;P<i.value.length;P++){const ne=i.value[P];ne.index=P}})},W={needEmit:!0,resetExpanded:!0,resetChecked:!0};me(()=>e.data,V=>{a.value=V,W.needEmit=!0,te()},{deep:!0}),me(()=>[e.defaultExpandedKeys,e.defaultExpandAll],()=>{W.resetExpanded=!0,te()},{deep:!0,immediate:!1}),me(()=>e.defaultCheckedKeys,()=>{W.resetChecked=!0,te()},{deep:!0,immediate:!1});let M=null;const te=()=>{M&&clearTimeout(M),M=setTimeout(()=>{W.resetExpanded&&I(),T(),W.resetChecked&&o(),W.needEmit&&ze(()=>{t("node-generated")}),W.needEmit=!1,W.resetExpanded=!1,W.resetChecked=!1,M=null},5)};return te(),{flatTree:i,visibleNodes:s,expandedKeys:y,checkedKeys:$,rawData:a,getNodeData:v,getFlatNode:m,regenerateFlatTree:te,flattenTree:L,insertFlatTree:ee,halfCheckedKeys:x,selectedKey:w,currentNode:c,toggleNodeChecked:u,setCurrentNode:p,getCheckedNodes:b,getCheckedKeys:K,setCheckedNodes:N,setCheckedKeys:d,expandNode:z,collapseNode:D,dragState:S,filter:C}}const ni={key:0,class:"vue-virtual-tree__loading"},li={class:"default-icon"},oi={key:0,viewBox:"0 0 1024 1024",width:"16",height:"16"},ai={key:1,class:"vue-virtual-tree__empty"},di=He({name:"VirtualTree",__name:"VirtualTree",props:{data:{default:()=>[]},props:{default:()=>({})},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1},defaultExpandedKeys:{default:()=>[]},defaultCheckedKeys:{default:()=>[]},currentNodeKey:{},expandOnClickNode:{type:Boolean,default:!0},lazy:{type:Boolean,default:!1},load:{},filterNodeMethod:{},accordion:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrop:{},allowDrag:{},itemSize:{default:32},height:{default:"100%"},indent:{type:[Number,Function],default:18},loading:{type:Boolean,default:!1}},emits:["node-click","node-check","node-expand","node-collapse","current-change","node-drag-start","node-drag-enter","node-drag-leave","node-drag-over","node-drag-end","node-drop","node-generated"],setup(e,{expose:t,emit:i}){const s=e,r=i,{visibleNodes:h,rawData:a,getNodeData:g,getFlatNode:v,regenerateFlatTree:m,insertFlatTree:$,checkedKeys:x,halfCheckedKeys:w,selectedKey:c,currentNode:u,toggleNodeChecked:p,setCurrentNode:b,getCheckedNodes:K,getCheckedKeys:N,setCheckedNodes:d,setCheckedKeys:o,expandNode:z,collapseNode:D,dragState:y,filter:I}=ri(s,r),C=Q(null),S=n=>{const l=n.target;if(!l)return null;const f=l.closest("[data-node-id]");if(!f)return null;const k=f.getAttribute("data-node-id");if(!k)return null;const _=isNaN(Number(k))?k:Number(k);return v(_)},L=n=>{const l=S(n);if(!l)return;const f=n.target;if(!f)return;const k=f.closest(".vue-virtual-tree-node__expand-icon"),_=f.closest(".vue-virtual-tree-node__checkbox"),E=f.closest(".vue-virtual-tree-node__content");_?W(l):k?l.isExpanded?ee(l):T(l):E&&(O(l,n),s.expandOnClickNode&&!ue(l.data,s.props)&&(l.isExpanded?ee(l):T(l)))},O=(n,l)=>{n.isDisabled||(b(n.id,n.data),r("current-change",n.data,P(n)),r("node-click",n.data,P(n),l))},T=async n=>{if(!n.isDisabled){if(s.lazy&&!n.isLoaded&&s.load){let l=function(){n.isLoading=!1,n.isLoaded=!0};n.isLoading=!0,n.isLoaded=!1;try{await new Promise(f=>{s.load(n.data,k=>{k&&k.length>0&&$(n,k),l(),f()})})}catch(f){l(),console.error("Lazy load error:",f)}}z(n),r("node-expand",n.data,P(n))}},ee=n=>{n.isDisabled||(D(n),r("node-collapse",n.data,P(n)))},W=n=>{if(n.isDisabled)return;p(n.id);const l=K(),f=N(),k=K(!1,!0).filter(E=>{const A=q(E,s.props);return w.value.has(A)&&!x.value.has(A)}),_=Array.from(w.value).filter(E=>!x.value.has(E));r("node-check",n.data,{checkedKeys:f,checkedNodes:l,halfCheckedKeys:_,halfCheckedNodes:k})},M=(n,l)=>{y.handleDragStart(n,l),r("node-drag-start",n.data,l)},te=(n,l)=>{var f,k,_;y.handleDragEnter(n,l),((k=(f=y.dropNode)==null?void 0:f.value)==null?void 0:k.id)===n.id&&((_=y.draggingNode)!=null&&_.value)&&r("node-drag-enter",y.draggingNode.value.data,l,n.data)},V=(n,l)=>{var f;y.handleDragLeave(n,l),(f=y.draggingNode)!=null&&f.value&&r("node-drag-leave",y.draggingNode.value.data,l,n.data)},Y=(n,l)=>{var f,k,_;y.handleDragOver(n,l),((k=(f=y.dropNode)==null?void 0:f.value)==null?void 0:k.id)===n.id&&((_=y.draggingNode)!=null&&_.value)&&r("node-drag-over",y.draggingNode.value.data,l,n.data)},le=(n,l)=>{var f;(f=y.draggingNode)!=null&&f.value&&r("node-drag-end",y.draggingNode.value.data,l),y.handleDragEnd(n,l)},ae=(n,l)=>{const f=y.handleDrop(n,l);f&&r("node-drop",f.draggingNode,f.dropNode,f.dropType,l)},oe=new WeakMap,P=n=>{if(oe.has(n))return oe.get(n);let l=null,f=null;const k=()=>{if(l!==null)return l;if(n.parentId===null)return l=null,null;const R=v(n.parentId);return R?(l=P(R),l):(l=null,null)},_=()=>(f!==null||(f=h.value.filter(B=>B.parentId===n.id).map(B=>P(B))),f),E=()=>h.value.filter(B=>B.parentId===n.parentId&&B.id!==n.id).map(B=>P(B)),A=()=>{const R=[],B=new Set,ie=se=>{h.value.filter(X=>X.parentId===se).forEach(X=>{B.has(X.id)||(B.add(X.id),R.push(P(X)),ie(X.id))})};return ie(n.id),R},j=()=>{const R=[],B=new Set;let ie=n.parentId;for(;ie!==null&&!B.has(ie);){B.add(ie);const se=v(ie);if(se)R.push(P(se)),ie=se.parentId;else break}return R},G={data:n.data,key:n.id,level:n.level,get parent(){return k()},get children(){return _()},expanded:n.isExpanded,checked:n.isChecked||!1,disabled:n.isDisabled||!1,isLeaf:ue(n.data,s.props),getLabel:()=>Ve(n.data,s.props),getData:()=>n.data,getParent:k,getChildren:_,getSiblings:E,getAllChildren:A,getAllParents:j};return oe.set(n,G),G},ne=n=>{const l=v(n);return l?P(l):null};return t({getCheckedNodes:(n,l)=>K(n,l),getCheckedKeys:n=>N(n),setCheckedNodes:(n,l)=>{d(n,l)},setCheckedKeys:(n,l)=>{o(n,l)},getCurrentNode:()=>u.value,setCurrentNode:n=>{if(typeof n=="string"||typeof n=="number"){const l=g(n);b(n,l)}else{const l=q(n,s.props);b(l,n)}},getCurrentKey:()=>c.value,setCurrentKey:n=>{b(n,g(n))},filter:n=>I(n).then(()=>{ze(()=>{var l,f;(l=C.value)==null||l.scrollToItem(0),(f=C.value)==null||f.forceUpdate()})}),getNode:n=>ne(n),remove:n=>{if(!Ie(a.value,n,s.props))return;const f=(k,_)=>{for(let E=0;E<k.length;E++){if(q(k[E],s.props)===_)return k.splice(E,1),!0;const A=re(k[E],s.props);if(A.length>0&&f(A,_))return!0}return!1};f(a.value,n),m()},append:(n,l)=>{if(l===void 0)a.value.push(n);else{const f=Ie(a.value,l,s.props);if(f){const _=(s.props||{}).children||"children";f[_]||(f[_]=[]),f[_].push(n)}}m()},insertBefore:(n,l)=>{const f=(k,_,E)=>{for(let A=0;A<k.length;A++){if(q(k[A],s.props)===_)return k.splice(A,0,E),!0;const j=re(k[A],s.props);if(j.length>0&&f(j,_,E))return!0}return!1};f(a.value,l,n),m()},insertAfter:(n,l)=>{const f=(k,_,E)=>{for(let A=0;A<k.length;A++){if(q(k[A],s.props)===_)return k.splice(A+1,0,E),!0;const j=re(k[A],s.props);if(j.length>0&&f(j,_,E))return!0}return!1};f(a.value,l,n),m()},updateKeyChildren:(n,l)=>{const f=Ie(a.value,n,s.props);if(f){const _=(s.props||{}).children||"children";f[_]=l,m()}},nodeGenerated:()=>{r("node-generated")}}),(n,l)=>(F(),J("div",{class:"vue-virtual-tree",style:Ee({height:typeof e.height=="number"?`${e.height}px`:e.height}),onClick:L},[e.loading?U(n.$slots,"tree-loading",{key:0},()=>[e.loading?(F(),J("div",ni,[...l[0]||(l[0]=[H("span",{class:"vue-virtual-tree-loading-text"},"加载中...",-1)])])):ve("",!0)],!0):(F(),J(Be,{key:1},[e.data.length>0?(F(),ce(he(Ae),{key:0,ref_key:"dynamicScrollerRef",ref:C,items:he(h),"min-item-size":e.itemSize||32,class:"vue-virtual-tree__scroller"},{default:Z(({item:f,index:k,active:_})=>[Fe(he(Je),{item:f,active:_,"data-index":k,class:"vue-virtual-tree__item"},{default:Z(()=>{var E,A,j;return[(F(),ce(Zt,{node:f,key:f.id,props:s.props,"show-checkbox":e.showCheckbox,"expand-on-click-node":e.expandOnClickNode,draggable:e.draggable,indent:s.indent,"drop-type":((A=(E=he(y).dropNode)==null?void 0:E.value)==null?void 0:A.id)===f.id?((j=he(y).dropType)==null?void 0:j.value)??null:null,onDragStart:M,onDragEnter:te,onDragLeave:V,onDragOver:Y,onDragEnd:le,onDrop:ae},{default:Z(({node:G,data:R})=>[U(n.$slots,"default",{node:G,data:R},void 0,!0)]),loading:Z(({node:G,data:R})=>[U(n.$slots,"loading",{node:G,data:R},()=>[l[1]||(l[1]=H("svg",{class:"vue-virtual-tree-node__loading-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[H("g",{transform:"translate(12,12)"},[H("circle",{cx:"0",cy:"0",r:"8",fill:"none",stroke:"currentColor","stroke-width":"1",opacity:"0.2"}),H("g",{class:"vue-virtual-tree-loading-dots"},[H("circle",{cx:"0",cy:"-8",r:"2",fill:"currentColor"}),H("circle",{cx:"6.928",cy:"-4",r:"2",fill:"currentColor",opacity:"0.7"}),H("circle",{cx:"6.928",cy:"4",r:"2",fill:"currentColor",opacity:"0.4"})])])],-1))],!0)]),icon:Z(({node:G,data:R})=>[U(n.$slots,"icon",{node:G,data:R},()=>[H("span",li,[G.isLeaf?ve("",!0):(F(),J("svg",oi,[...l[2]||(l[2]=[H("path",{d:"M384 384l256 256-256 256z",fill:"currentColor"},null,-1)])]))])],!0)]),_:3},8,["node","props","show-checkbox","expand-on-click-node","draggable","indent","drop-type"]))]}),_:2},1032,["item","active","data-index"])]),_:3},8,["items","min-item-size"])):(F(),J("div",ai,[U(n.$slots,"empty",{},()=>[l[3]||(l[3]=H("span",null,"暂无数据",-1))],!0)]))],64))],4))}}),ui=et(di,[["__scopeId","data-v-69f2af3d"]]);export{ui as V,et as _};
