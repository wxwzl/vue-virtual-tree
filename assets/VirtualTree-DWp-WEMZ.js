import{n as xe,p as et,l as tt,m as it,b as de,e as B,q as st,s as rt,x as Ke,y as nt,w as lt,c as se,f as be,h as Me,z as U,k as Z,F as ot,i as at,A as Ve,B as Pe,C as dt,D as Ne,E as Se,G as ct,H as ut,I as ht,d as Fe,r as G,J as he,a as H,g as ft,t as vt,K as ge,u as ae}from"./index-DxXrj-0e.js";function pt(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var i=e.indexOf("Trident/");if(i>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):-1}let me;function _e(){_e.init||(_e.init=!0,me=pt()!==-1)}var ze={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){_e(),xe(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",me&&this.$el.appendChild(e),e.data="about:blank",me||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!me&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const gt=it();et("data-v-b329ee4c");const mt={class:"resize-observer",tabindex:"-1"};tt();const yt=gt((e,t,i,s,r,h)=>(B(),de("div",mt)));ze.render=yt;ze.__scopeId="data-v-b329ee4c";ze.__file="src/components/ResizeObserver.vue";function ye(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ye=function(t){return typeof t}:ye=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function St(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function zt(e,t,i){return t&&St(e.prototype,t),e}function Re(e){return kt(e)||$t(e)||wt(e)||_t()}function kt(e){if(Array.isArray(e))return De(e)}function $t(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function wt(e,t){if(e){if(typeof e=="string")return De(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return De(e,t)}}function De(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function _t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dt(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function It(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,r,h,a=function(p){for(var m=arguments.length,$=new Array(m>1?m-1:0),N=1;N<m;N++)$[N-1]=arguments[N];if(h=$,!(s&&p===r)){var D=i.leading;typeof D=="function"&&(D=D(p,r)),(!s||p!==r)&&D&&e.apply(void 0,[p].concat(Re(h))),r=p,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[p].concat(Re(h))),s=0},t)}};return a._clear=function(){clearTimeout(s),s=null},a}function Be(e,t){if(e===t)return!0;if(ye(e)==="object"){for(var i in e)if(!Be(e[i],t[i]))return!1;return!0}return!1}var Ct=function(){function e(t,i,s){bt(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(i,s)}return zt(e,[{key:"createObserver",value:function(i,s){var r=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Dt(i),this.callback=function(g,p){r.options.callback(g,p),g&&r.options.once&&(r.frozen=!0,r.destroyObserver())},this.callback&&this.options.throttle){var h=this.options.throttleOptions||{},a=h.leading;this.callback=It(this.callback,this.options.throttle,{leading:function(p){return a==="both"||a==="visible"&&p||a==="hidden"&&!p}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(g){var p=g[0];if(g.length>1){var m=g.find(function(N){return N.isIntersecting});m&&(p=m)}if(r.callback){var $=p.isIntersecting&&p.intersectionRatio>=r.threshold;if($===r.oldResult)return;r.oldResult=$,r.callback($,p)}},this.options.intersection),xe(function(){r.observer&&r.observer.observe(r.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function Ue(e,t,i){var s=t.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new Ct(e,s,i);e._vue_visibilityState=r}}function xt(e,t,i){var s=t.value,r=t.oldValue;if(!Be(s,r)){var h=e._vue_visibilityState;if(!s){He(e);return}h?h.createObserver(s,i):Ue(e,{value:s},i)}}function He(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var Nt={beforeMount:Ue,updated:xt,unmounted:He};function Tt(e){return{all:e=e||new Map,on:function(t,i){var s=e.get(t);s&&s.push(i)||e.set(t,[i])},off:function(t,i){var s=e.get(t);s&&s.splice(s.indexOf(i)>>>0,1)},emit:function(t,i){(e.get(t)||[]).slice().map(function(s){s(i)}),(e.get("*")||[]).slice().map(function(s){s(t,i)})}}}var Et={itemsLimit:1e3},Ot=/(auto|scroll)/;function We(e,t){return e.parentNode===null?t:We(e.parentNode,t.concat([e]))}var $e=function(t,i){return getComputedStyle(t,null).getPropertyValue(i)},At=function(t){return $e(t,"overflow")+$e(t,"overflow-y")+$e(t,"overflow-x")},Vt=function(t){return Ot.test(At(t))};function Le(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=We(e.parentNode,[]),i=0;i<t.length;i+=1)if(Vt(t[i]))return t[i];return document.scrollingElement||document.documentElement}}function Ie(e){"@babel/helpers - typeof";return Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(e)}var je={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function qe(){return this.items.length&&Ie(this.items[0])!=="object"}var Ce=!1;if(typeof window<"u"){Ce=!1;try{var Rt=Object.defineProperty({},"passive",{get:function(){Ce=!0}});window.addEventListener("test",null,Rt)}catch{}}let Lt=0;var Te={name:"RecycleScroller",components:{ResizeObserver:ze},directives:{ObserveVisibility:Nt},props:{...je,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,i=this.sizeField,s=this.minItemSize;let r=1e4,h=0,a;for(let g=0,p=t.length;g<p;g++)a=t[g][i]||s,a<r&&(r=a),h+=a,e[g]={accumulator:h,size:a};return this.$_computedMinItemSize=r,e}return[]},simpleArray:qe,itemIndexByKey(){const{keyField:e,items:t}=this,i={};for(let s=0,r=t.length;s<r;s++)i[t[s][e]]=s;return i}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,i,s,r){const h=st({id:Lt++,index:t,used:!0,key:s,type:r}),a=rt({item:i,position:0,nr:h});return e.push(a),a},unuseView(e,t=!1){const i=this.$_unusedViews,s=e.nr.type;let r=i.get(s);r||(r=[],i.set(s,r)),r.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:i}=this.updateVisibleItems(!1,!0);i||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const i=this.itemSize,s=this.gridItems||1,r=this.itemSecondarySize||i,h=this.$_computedMinItemSize,a=this.typeField,g=this.simpleArray?null:this.keyField,p=this.items,m=p.length,$=this.sizes,N=this.$_views,D=this.$_unusedViews,c=this.pool,u=this.itemIndexByKey;let v,b,L,T,d;if(!m)v=b=T=d=L=0;else if(this.$_prerender)v=T=0,b=d=Math.min(this.prerender,p.length),L=null;else{const S=this.getScroll();if(t){let E=S.start-this.$_lastUpdateScrollPosition;if(E<0&&(E=-E),i===null&&E<h||E<i)return{continuous:!0}}this.$_lastUpdateScrollPosition=S.start;const R=this.buffer;S.start-=R,S.end+=R;let V=0;if(this.$refs.before&&(V=this.$refs.before.scrollHeight,S.start-=V),this.$refs.after){const E=this.$refs.after.scrollHeight;S.end+=E}if(i===null){let E,W=0,ee=m-1,w=~~(m/2),P;do P=w,E=$[w].accumulator,E<S.start?W=w:w<m-1&&$[w+1].accumulator>S.start&&(ee=w),w=~~((W+ee)/2);while(w!==P);for(w<0&&(w=0),v=w,L=$[m-1].accumulator,b=w;b<m&&$[b].accumulator<S.end;b++);for(b===-1?b=p.length-1:(b++,b>m&&(b=m)),T=v;T<m&&V+$[T].accumulator<S.start;T++);for(d=T;d<m&&V+$[d].accumulator<S.end;d++);}else{v=~~(S.start/i*s);const E=v%s;v-=E,b=Math.ceil(S.end/i*s),T=Math.max(0,Math.floor((S.start-V)/i*s)),d=Math.floor((S.end-V)/i*s),v<0&&(v=0),b>m&&(b=m),T<0&&(T=0),d>m&&(d=m),L=Math.ceil(m/s)*i}}b-v>Et.itemsLimit&&this.itemsLimitError(),this.totalSize=L;let o;const k=v<=this.$_endIndex&&b>=this.$_startIndex;if(k)for(let S=0,R=c.length;S<R;S++)o=c[S],o.nr.used&&(e&&(o.nr.index=u[o.item[g]]),(o.nr.index==null||o.nr.index<v||o.nr.index>=b)&&this.unuseView(o));const _=k?null:new Map;let y,C,x;for(let S=v;S<b;S++){y=p[S];const R=g?y[g]:y;if(R==null)throw new Error(`Key is ${R} on item (keyField is '${g}')`);if(o=N.get(R),!i&&!$[S].size){o&&this.unuseView(o);continue}C=y[a];let V=D.get(C),E=!1;if(!o)k?V&&V.length?o=V.pop():o=this.addView(c,S,y,R,C):(x=_.get(C)||0,(!V||x>=V.length)&&(o=this.addView(c,S,y,R,C),this.unuseView(o,!0),V=D.get(C)),o=V[x],_.set(C,x+1)),N.delete(o.nr.key),o.nr.used=!0,o.nr.index=S,o.nr.key=R,o.nr.type=C,N.set(R,o),E=!0;else if(!o.nr.used&&(o.nr.used=!0,E=!0,V)){const W=V.indexOf(o);W!==-1&&V.splice(W,1)}o.item=y,E&&(S===p.length-1&&this.$emit("scroll-end"),S===0&&this.$emit("scroll-start")),i===null?(o.position=$[S-1].accumulator,o.offset=0):(o.position=Math.floor(S/s)*i,o.offset=S%s*r)}return this.$_startIndex=v,this.$_endIndex=b,this.emitUpdate&&this.$emit("update",v,b,T,d),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:k}},getListenerTarget(){let e=Le(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,i=t==="vertical";let s;if(this.pageMode){const r=e.getBoundingClientRect(),h=i?r.height:r.width;let a=-(i?r.top:r.left),g=i?window.innerHeight:window.innerWidth;a<0&&(g+=a,a=0),a+g>h&&(g=h-a),s={start:a,end:a+g}}else i?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ce?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const i=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/i)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let i,s,r;if(this.pageMode){const h=Le(this.$el),a=h.tagName==="HTML"?0:h[t.scroll],g=h.getBoundingClientRect(),m=this.$el.getBoundingClientRect()[t.start]-g[t.start];i=h,s=t.scroll,r=e+a+m}else i=this.$el,s=t.scroll,r=e;i[s]=r},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const Kt={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Mt={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Pt(e,t,i,s,r,h){const a=Ke("ResizeObserver"),g=nt("observe-visibility");return lt((B(),se("div",{class:Se(["vue-recycle-scroller",{ready:r.ready,"page-mode":i.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...p)=>h.handleScroll&&h.handleScroll(...p))},[e.$slots.before?(B(),se("div",Kt,[U(e.$slots,"before")],512)):be("v-if",!0),(B(),de(Ve(i.listTag),{ref:"wrapper",style:Ne({[e.direction==="vertical"?"minHeight":"minWidth"]:r.totalSize+"px"}),class:Se(["vue-recycle-scroller__item-wrapper",i.listClass])},{default:Z(()=>[(B(!0),se(ot,null,at(r.pool,p=>(B(),de(Ve(i.itemTag),Pe({key:p.nr.id,style:r.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${p.position}px) translate${e.direction==="vertical"?"X":"Y"}(${p.offset}px)`,width:i.gridItems?`${e.direction==="vertical"&&i.itemSecondarySize||i.itemSize}px`:void 0,height:i.gridItems?`${e.direction==="horizontal"&&i.itemSecondarySize||i.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[i.itemClass,{hover:!i.skipHover&&r.hoverKey===p.nr.key}]]},dt(i.skipHover?{}:{mouseenter:()=>{r.hoverKey=p.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:Z(()=>[U(e.$slots,"default",{item:p.item,index:p.nr.index,active:p.nr.used})]),_:2},1040,["style","class"]))),128)),U(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(B(),se("div",Mt,[U(e.$slots,"after")],512)):be("v-if",!0),Me(a,{onNotify:h.handleResize},null,8,["onNotify"])],34)),[[g,h.handleVisibilityChange]])}Te.render=Pt;Te.__file="src/components/RecycleScroller.vue";var Ee={name:"DynamicScroller",components:{RecycleScroller:Te},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const t of e)if(t.target&&t.target.$_vs_onResize){let i,s;if(t.borderBoxSize){const r=t.borderBoxSize[0];i=r.inlineSize,s=r.blockSize}else i=t.contentRect.width,s=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,i,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...je,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:qe,itemsWithSize(){const e=[],{items:t,keyField:i,simpleArray:s}=this,r=this.vscrollData.sizes,h=t.length;for(let a=0;a<h;a++){const g=t[a],p=s?a:g[i];let m=r[p];typeof m>"u"&&!this.$_undefinedMap[p]&&(m=0),e.push({item:g,id:p,size:m})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const i=this.$el.scrollTop;let s=0,r=0;const h=Math.min(e.length,t.length);for(let g=0;g<h&&!(s>=i);g++)s+=t[g].size||this.minItemSize,r+=e[g].size||this.minItemSize;const a=r-s;a!==0&&(this.$el.scrollTop+=a)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=Tt()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const i=this.simpleArray?t??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[i]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};function Ft(e,t,i,s,r,h){const a=Ke("RecycleScroller");return B(),de(a,Pe({ref:"scroller",items:h.itemsWithSize,"min-item-size":i.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:h.onScrollerResize,onVisible:h.onScrollerVisible}),{default:Z(({item:g,index:p,active:m})=>[U(e.$slots,"default",ct(ut({item:g.item,index:p,active:m,itemWithSize:g})))]),before:Z(()=>[U(e.$slots,"before")]),after:Z(()=>[U(e.$slots,"after")]),empty:Z(()=>[U(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Ee.render=Ft;Ee.__file="src/components/DynamicScroller.vue";var Ye={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const i=this.vscrollData.sizes[t],s=this.vscrollData.sizes[e];i!=null&&i!==s&&this.applySize(i)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const t=this.$el.offsetWidth,i=this.$el.offsetHeight;this.applyWidthHeight(t,i)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const i=~~(this.vscrollParent.direction==="vertical"?t:e);i&&this.size!==i&&this.applySize(i)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,i){this.id===e&&this.applyWidthHeight(t,i)}},render(){return ht(this.tag,this.$slots.default())}};Ye.__file="src/components/DynamicScrollerItem.vue";const fe={id:"id",children:"children",label:"label",disabled:"disabled",isLeaf:"isLeaf"};function q(e,t={}){const i={...fe,...t};return e[i.id]??e.id??""}function Oe(e,t={}){const i={...fe,...t};return e[i.label]??e.label??""}function re(e,t={}){const i={...fe,...t};return e[i.children]??e.children??[]}function Bt(e,t={}){const i={...fe,...t};return e[i.disabled]??e.disabled??!1}function ce(e,t={}){const i={...fe,...t};return re(e,t).length>0?!1:e[i.isLeaf]!==void 0?e[i.isLeaf]??!1:!0}function Ge(e,t,i=null,s={}){for(const r of e){if(t(r,i)===!1)continue;const a=re(r,s);a.length>0&&Ge(a,t,r,s)}}function Xe(e,t,i={}){for(const s of e){if(t(s))return s;const r=re(s,i);if(r.length>0){const h=Xe(r,t,i);if(h)return h}}return null}function we(e,t,i={}){return Xe(e,s=>q(s,i)===t,i)}function Ut(e,t={}){const i=[];return Ge(e,s=>{i.push(q(s,t))},null,t),i}const Ht=["draggable","data-node-id"],Wt={class:"vue-virtual-tree-node__content"},jt={key:0},qt={key:0,class:"vue-virtual-tree-node__checkbox"},Yt=["checked","indeterminate","disabled"],Gt={class:"vue-virtual-tree-node__label"},Xt=Fe({__name:"TreeNode",props:{node:{},props:{},showCheckbox:{type:Boolean},expandOnClickNode:{type:Boolean},draggable:{type:Boolean},dropType:{},indent:{type:[Number,Function]}},emits:["drag-start","drag-enter","drag-leave","drag-over","drag-end","drop"],setup(e,{emit:t}){const i=e,s=t,r=G(!1),h=he(()=>Oe(i.node.data,i.props)),a=he(()=>ce(i.node.data,i.props)),g=he(()=>{const u=i.indent;if(typeof u=="function")try{return u(i.node)??18}catch{return 18}return u??18}),p=u=>{i.node.isDisabled||!i.draggable||(r.value=!0,s("drag-start",i.node,u))},m=u=>{i.draggable&&s("drag-enter",i.node,u)},$=u=>{i.draggable&&s("drag-leave",i.node,u)},N=u=>{i.draggable&&s("drag-over",i.node,u)},D=u=>{r.value=!1,s("drag-end",i.node,u)},c=u=>{i.draggable&&s("drop",i.node,u)};return(u,v)=>(B(),se("div",{class:Se(["vue-virtual-tree-node",{"is-expanded":e.node.isExpanded,"is-checked":e.node.isChecked,"is-disabled":e.node.isDisabled,"is-leaf":a.value,"is-loading":e.node.isLoading,"is-dragging":r.value,[`drop-${e.dropType}`]:e.dropType}]),style:Ne({paddingLeft:`${e.node.level*g.value}px`}),draggable:e.draggable&&!e.node.isDisabled,"data-node-id":e.node.id,onDragstart:p,onDragenter:m,onDragleave:$,onDragover:N,onDragend:D,onDrop:c},[H("div",Wt,[H("span",{class:Se(["vue-virtual-tree-node__expand-icon",{"is-leaf":a.value,"is-loading":e.node.isLoading}])},[e.node.isLoading?(B(),se("span",jt,[U(u.$slots,"loading",{node:e.node,data:e.node.data},void 0,!0)])):U(u.$slots,"icon",{key:1,node:e.node,data:e.node.data},void 0,!0)],2),e.showCheckbox?(B(),se("span",qt,[H("input",{type:"checkbox",checked:e.node.isChecked,indeterminate:e.node.isIndeterminate,disabled:e.node.isDisabled},null,8,Yt)])):be("",!0),H("span",Gt,[U(u.$slots,"default",{node:e.node,data:e.node.data},()=>[ft(vt(h.value),1)],!0)])])],46,Ht))}}),Je=(e,t)=>{const i=e.__vccOpts||e;for(const[s,r]of t)i[s]=r;return i},Jt=Je(Xt,[["__scopeId","data-v-50e04bcd"]]);function Qt(e,t,i){const s=he(()=>{const d=new Set;return t.value.forEach(o=>{o.isChecked&&d.add(o.id)}),d}),r=he(()=>{const d=new Set;return t.value.forEach(o=>{o.isIndeterminate&&d.add(o.id)}),d}),h=G(null),a=G(null),g=()=>{t.value.forEach(d=>{d.isChecked=!1,d.isIndeterminate=!1}),e.defaultCheckedKeys&&e.defaultCheckedKeys.length>0&&e.defaultCheckedKeys.forEach(d=>{t.value.find(k=>k.id===d)&&D(d,!0)})},p=()=>{if(e.currentNodeKey!==void 0){h.value=e.currentNodeKey;const d=i(e.currentNodeKey);a.value=d}},m=d=>{const o=[],k=i(d);if(!k)return o;const _=y=>{re(y,e.props).forEach(x=>{const S=q(x,e.props);o.push(S),_(x)})};return _(k),o},$=()=>{r.value.clear();const d=new Set(t.value.map(o=>o.id));for(const o of d){const k=m(o);if(k.length===0)continue;const _=k.filter(y=>s.value.has(y));_.length>0&&_.length<k.length&&r.value.add(o)}},N=(d,o)=>{d.isChecked=o,d.isIndeterminate=!1;const k=(y,C)=>{y.children&&y.children.forEach(x=>{x.isChecked=C,x.isIndeterminate=!1,k(x,C)})};k(d,o);const _=y=>{const C=y.parentId;if(C!==null){const x=t.value.find(S=>S.id===C);if(x){const S=t.value.filter(E=>E.parentId===C),R=S.filter(E=>E.isChecked).length,V=S.filter(E=>E.isIndeterminate).length;R===S.length?(x.isChecked=!0,x.isIndeterminate=!1):R===0&&V===0?(x.isChecked=!1,x.isIndeterminate=!1):(x.isChecked=!1,x.isIndeterminate=!0),_(x)}}};_(d)},D=(d,o,k)=>{const _=t.value.find(C=>C.id===d);if(!_)return;k??e.checkStrictly??!1?(_.isChecked=o,_.isIndeterminate=!1):N(_,o)},c=d=>{const o=s.value.has(d);D(d,!o)},u=(d,o=null)=>{h.value=d,a.value=o},v=(d=!1,o=!1)=>{const k=[],_=o?new Set([...s.value,...r.value]):s.value;for(const y of _){const C=i(y);C&&(d?re(C,e.props).length===0&&k.push(C):k.push(C))}return k},b=(d=!1)=>d?v(!0).map(k=>q(k,e.props)):Array.from(s.value),L=(d,o=!1)=>{s.value.clear(),d.filter(_=>o?ce(_,e.props):!0).map(_=>q(_,e.props)).forEach(_=>{D(_,!0)}),e.checkStrictly||$()},T=(d,o=!1)=>{s.value.clear(),(o?d.filter(_=>{const y=i(_);return y&&ce(y,e.props)}):d).forEach(_=>{D(_,!0)}),e.checkStrictly||$()};return p(),ge(()=>e.currentNodeKey,d=>{d!==void 0&&u(d,i(d))}),{checkedKeys:s,halfCheckedKeys:r,selectedKey:h,currentNode:a,initNodeChecked:g,setNodeChecked:D,toggleNodeChecked:c,setCurrentNode:u,getCheckedNodes:v,getCheckedKeys:b,setCheckedNodes:L,setCheckedKeys:T,updateHalfCheckedKeys:$}}function Zt(e,t,i,s){const r=G(new Set),h=()=>{if(e.defaultExpandAll){const c=Ut(e.data,e.props);r.value=new Set(c)}else e.defaultExpandedKeys&&e.defaultExpandedKeys.length>0?r.value=new Set(e.defaultExpandedKeys):r.value=new Set},a=c=>{const u=[];return c.children&&c.children.forEach(v=>{u.push(v),v.isExpanded&&u.push(...a(v))}),u},g=c=>{if(typeof c.visibleIndex!="number")return;const u=a(c);u.length!==0&&(i.value.splice(c.visibleIndex+1,0,...u),s())},p=c=>{if(typeof c.visibleIndex!="number")return;const u=a(c);u.length!==0&&(i.value.splice(c.visibleIndex+1,u.length),s())},m=c=>{e.accordion&&t.value.filter(v=>v.parentId===c.parentId&&v.id!==c.id&&v.isExpanded).forEach(v=>{v.isExpanded=!1,r.value.delete(v.id),p(v)}),c.isExpanded=!0,r.value.add(c.id),g(c)},$=(c,u)=>{c.isExpanded=u,r.value.delete(c.id),c.children&&c.children.forEach(v=>{$(v,u)})},N=c=>{p(c),$(c,!1)};return{expandedKeys:r,initExpandedKeys:h,expandNode:m,collapseNode:N,toggleNode:c=>{c.isExpanded?N(c):m(c)}}}function ei(e,t,i,s,r){const h=()=>{const m=t.value.filter(D=>D.parentId===null),$=[],N=D=>{$.push(D),D.isExpanded&&D.children&&D.children.forEach(c=>N(c))};m.forEach(D=>N(D)),r($)},a=(m,$)=>m?Oe($,e.props).toLowerCase().includes(m.toLowerCase()):!0,g=m=>m?new Promise(async $=>{const N=e.filterNodeMethod||a,D=new Set;t.value.forEach(c=>{if(N(m,c.data)){D.add(c);let u=c.parentId;for(;u;){const v=i.value.get(u);v?(D.add(v),v.isExpanded=!0,s.value.add(v.id),u=v.parentId):u=null}}}),r(t.value.filter(c=>D.has(c))),$(void 0)}):(t.value.forEach($=>{$.isLeaf||($.isExpanded=!0,s.value.add($.id))}),h(),Promise.resolve());return{filter:g,clearFilter:()=>{g("")}}}function ti(e,t){const i=G(null),s=G(null),r=G(null),h=c=>!0,a=(c,u,v,b)=>{if(v==="inner"){const L=q(c,b.props),T=d=>q(d,b.props)===L?!0:re(d,b.props).some(k=>T(k));return!T(u)}return!0};return{draggingNode:i,dropNode:s,dropType:r,handleDragStart:(c,u)=>{i.value=c,u.dataTransfer&&(u.dataTransfer.effectAllowed="move")},handleDragEnter:(c,u)=>{if(!i.value)return;const v=t(i.value.id),b=t(c.id);if(!v||!b||!(e.allowDrag||h)(v))return;s.value=c;const T=u.currentTarget.getBoundingClientRect(),d=u.clientY-T.top,o=T.height,k=o/3;if(d<k?r.value="prev":d>o-k?r.value="next":r.value="inner",!(e.allowDrop||((y,C,x)=>a(y,C,x,e)))(v,b,r.value)){r.value=null;return}u.preventDefault()},handleDragLeave:(c,u)=>{var b;const v=u.relatedTarget;v&&u.currentTarget.contains(v)||((b=s.value)==null?void 0:b.id)===c.id&&(s.value=null,r.value=null)},handleDragOver:(c,u)=>{if(!i.value||!s.value||s.value.id!==c.id)return;const v=t(i.value.id),b=t(c.id);if(!v||!b)return;const L=u.currentTarget.getBoundingClientRect(),T=u.clientY-L.top,d=L.height,o=d/3;let k;if(T<o?k="prev":T>d-o?k="next":k="inner",!(e.allowDrop||((y,C,x)=>a(y,C,x,e)))(v,b,k)){r.value=null,u.preventDefault();return}r.value=k,u.preventDefault()},handleDragEnd:(c,u)=>{i.value=null,s.value=null,r.value=null},handleDrop:(c,u)=>{if(!i.value||!s.value||r.value===null)return;const v=t(i.value.id),b=t(c.id);if(!v||!b||!(e.allowDrop||((d,o,k)=>a(d,o,k,e)))(v,b,r.value))return;i.value=null,s.value=null;const T=r.value;return r.value=null,{draggingNode:v,dropNode:b,dropType:T}}}}function ii(e){const t=G([]),i=G([]),s=()=>{i.value.forEach((w,P)=>{w.visibleIndex=P})},r=w=>{i.value=w,s()},h=G(e.data),a=G(new Map),g=w=>{const P=a.value.get(w);return P?P.data:null},p=w=>a.value.get(w)||null,{checkedKeys:m,halfCheckedKeys:$,selectedKey:N,currentNode:D,toggleNodeChecked:c,setCurrentNode:u,getCheckedNodes:v,getCheckedKeys:b,setCheckedNodes:L,setCheckedKeys:T,initNodeChecked:d}=Qt(e,t,g),{expandNode:o,collapseNode:k,expandedKeys:_,initExpandedKeys:y}=Zt(e,t,i,s),{filter:C}=ei(e,t,a,_,r),x=ti(e,g),S=(w,P=0,ne=null,le=0,ue=!0,te)=>{const ie=new Map,j=[];function ve(l,f=0,z=null,I=0,O=!0,A=[],F){const Y=[];let M=l.length;for(let K=0;K<M;K++){let X=I+K;const J=l[K],pe=q(J,F),Q=re(J,F),Ae=_.value.has(pe),Qe=ce(J,F),oe={id:pe,data:J,level:f,parentId:(z==null?void 0:z.id)||null,index:X,isExpanded:Ae,isDisabled:Bt(J,F),isLeaf:Qe,isLoading:!1,isLoaded:!1,isChecked:!1,rawChildren:Q.length>0?Q:void 0};if(Y.push(oe),A.push(oe),O&&j.push(oe),Q.length>0){const Ze=ve(Q,f+1,oe,X,Ae&&O,A,F);oe.children=Ze}ie.set(pe,oe)}return Y}const ke=[];return{nodes:ve(w,P,ne,le,ue,ke,te),flatNodes:ke,nodeMap:ie,visibleNodes:j}};let R=!1;const V=()=>{if(R)return;R=!0;const{flatNodes:w,nodeMap:P,visibleNodes:ne}=S(h.value,0,null,0,!0,e.props);t.value=w,a.value=P,r(ne),R=!1},E=(w,P)=>{const{nodes:ne,flatNodes:le,nodeMap:ue}=S(P,w.level+1,w,w.index+1,!0,e.props);w.children=ne,ue.forEach((te,ie)=>{a.value.set(ie,te)}),t.value.splice(w.index+1,0,...le),requestAnimationFrame(()=>{for(let te=w.index+le.length;te<t.value.length;te++){const ie=t.value[te];ie.index=te}})};ge(()=>e.data,w=>{h.value=w,ee()},{deep:!0}),ge(()=>[e.defaultExpandedKeys,e.defaultExpandAll],()=>{ee({resetExpanded:!0})},{deep:!0,immediate:!1}),ge(()=>e.defaultCheckedKeys,()=>{ee({resetChecked:!0})},{deep:!0,immediate:!1});let W=null;const ee=(w={})=>{const{resetExpanded:P=!1,resetChecked:ne=!1}=w;W&&clearTimeout(W),W=setTimeout(()=>{P&&y(),V(),ne&&d(),W=null},5)};return ee({resetExpanded:!0,resetChecked:!0}),{flatTree:t,visibleNodes:i,expandedKeys:_,checkedKeys:m,rawData:h,getNodeData:g,getFlatNode:p,regenerateFlatTree:ee,flattenTree:S,insertFlatTree:E,halfCheckedKeys:$,selectedKey:N,currentNode:D,toggleNodeChecked:c,setCurrentNode:u,getCheckedNodes:v,getCheckedKeys:b,setCheckedNodes:L,setCheckedKeys:T,expandNode:o,collapseNode:k,dragState:x,filter:C}}const si={class:"default-icon"},ri={key:0,viewBox:"0 0 1024 1024",width:"16",height:"16"},ni={key:1,class:"vue-virtual-tree__empty"},li=Fe({name:"VirtualTree",__name:"VirtualTree",props:{data:{default:()=>[]},props:{default:()=>({})},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1},defaultExpandedKeys:{default:()=>[]},defaultCheckedKeys:{default:()=>[]},currentNodeKey:{},expandOnClickNode:{type:Boolean,default:!0},lazy:{type:Boolean,default:!1},load:{},filterNodeMethod:{},accordion:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrop:{},allowDrag:{},itemSize:{default:32},height:{default:"100%"},indent:{type:[Number,Function],default:18}},emits:["node-click","node-check","node-expand","node-collapse","current-change","node-drag-start","node-drag-enter","node-drag-leave","node-drag-over","node-drag-end","node-drop"],setup(e,{expose:t,emit:i}){const s=e,r=i,{visibleNodes:h,rawData:a,getNodeData:g,getFlatNode:p,regenerateFlatTree:m,insertFlatTree:$,checkedKeys:N,halfCheckedKeys:D,selectedKey:c,currentNode:u,toggleNodeChecked:v,setCurrentNode:b,getCheckedNodes:L,getCheckedKeys:T,setCheckedNodes:d,setCheckedKeys:o,expandNode:k,collapseNode:_,dragState:y,filter:C}=ii(s),x=G(null),S=n=>{const l=n.target;if(!l)return null;const f=l.closest("[data-node-id]");if(!f)return null;const z=f.getAttribute("data-node-id");if(!z)return null;const I=isNaN(Number(z))?z:Number(z);return p(I)},R=n=>{const l=S(n);if(!l)return;const f=n.target;if(!f)return;const z=f.closest(".vue-virtual-tree-node__expand-icon"),I=f.closest(".vue-virtual-tree-node__checkbox"),O=f.closest(".vue-virtual-tree-node__content");I?ee(l):z?l.isExpanded?W(l):E(l):O&&(V(l,n),s.expandOnClickNode&&!ce(l.data,s.props)&&(l.isExpanded?W(l):E(l)))},V=(n,l)=>{n.isDisabled||(b(n.id,n.data),r("current-change",n.data,j(n)),r("node-click",n.data,j(n),l))},E=async n=>{if(!n.isDisabled){if(s.lazy&&!n.isLoaded&&s.load){let l=function(){n.isLoading=!1,n.isLoaded=!0};n.isLoading=!0,n.isLoaded=!1;try{await new Promise(f=>{s.load(n.data,z=>{z&&z.length>0&&$(n,z,!0),l(),f()})})}catch(f){l(),console.error("Lazy load error:",f)}}k(n),r("node-expand",n.data,j(n))}},W=n=>{n.isDisabled||(_(n),r("node-collapse",n.data,j(n)))},ee=n=>{if(n.isDisabled)return;v(n.id);const l=L(),f=T(),z=L(!1,!0).filter(O=>{const A=q(O,s.props);return D.value.has(A)&&!N.value.has(A)}),I=Array.from(D.value).filter(O=>!N.value.has(O));r("node-check",n.data,{checkedKeys:f,checkedNodes:l,halfCheckedKeys:I,halfCheckedNodes:z})},w=(n,l)=>{y.handleDragStart(n,l),r("node-drag-start",n.data,l)},P=(n,l)=>{var f,z,I;y.handleDragEnter(n,l),((z=(f=y.dropNode)==null?void 0:f.value)==null?void 0:z.id)===n.id&&((I=y.draggingNode)!=null&&I.value)&&r("node-drag-enter",y.draggingNode.value.data,l,n.data)},ne=(n,l)=>{var f;y.handleDragLeave(n,l),(f=y.draggingNode)!=null&&f.value&&r("node-drag-leave",y.draggingNode.value.data,l,n.data)},le=(n,l)=>{var f,z,I;y.handleDragOver(n,l),((z=(f=y.dropNode)==null?void 0:f.value)==null?void 0:z.id)===n.id&&((I=y.draggingNode)!=null&&I.value)&&r("node-drag-over",y.draggingNode.value.data,l,n.data)},ue=(n,l)=>{var f;(f=y.draggingNode)!=null&&f.value&&r("node-drag-end",y.draggingNode.value.data,l),y.handleDragEnd(n,l)},te=(n,l)=>{const f=y.handleDrop(n,l);f&&r("node-drop",f.draggingNode,f.dropNode,f.dropType,l)},ie=new WeakMap,j=n=>{if(ie.has(n))return ie.get(n);let l=null,f=null;const z=()=>{if(l!==null)return l;if(n.parentId===null)return l=null,null;const M=p(n.parentId);return M?(l=j(M),l):(l=null,null)},I=()=>(f!==null||(f=h.value.filter(K=>K.parentId===n.id).map(K=>j(K))),f),O=()=>h.value.filter(K=>K.parentId===n.parentId&&K.id!==n.id).map(K=>j(K)),A=()=>{const M=[],K=new Set,X=J=>{h.value.filter(Q=>Q.parentId===J).forEach(Q=>{K.has(Q.id)||(K.add(Q.id),M.push(j(Q)),X(Q.id))})};return X(n.id),M},F=()=>{const M=[],K=new Set;let X=n.parentId;for(;X!==null&&!K.has(X);){K.add(X);const J=p(X);if(J)M.push(j(J)),X=J.parentId;else break}return M},Y={data:n.data,key:n.id,level:n.level,get parent(){return z()},get children(){return I()},expanded:n.isExpanded,checked:n.isChecked||!1,disabled:n.isDisabled||!1,isLeaf:ce(n.data,s.props),getLabel:()=>Oe(n.data,s.props),getData:()=>n.data,getParent:z,getChildren:I,getSiblings:O,getAllChildren:A,getAllParents:F};return ie.set(n,Y),Y},ve=n=>{const l=p(n);return l?j(l):null};return t({getCheckedNodes:(n,l)=>L(n,l),getCheckedKeys:n=>T(n),setCheckedNodes:(n,l)=>{d(n,l)},setCheckedKeys:(n,l)=>{o(n,l)},getCurrentNode:()=>u.value,setCurrentNode:n=>{if(typeof n=="string"||typeof n=="number"){const l=g(n);b(n,l)}else{const l=q(n,s.props);b(l,n)}},getCurrentKey:()=>c.value,setCurrentKey:n=>{b(n,g(n))},filter:n=>C(n).then(()=>{xe(()=>{var l,f;(l=x.value)==null||l.scrollToItem(0),(f=x.value)==null||f.forceUpdate()})}),getNode:n=>ve(n),remove:n=>{if(!we(a.value,n,s.props))return;const f=(z,I)=>{for(let O=0;O<z.length;O++){if(q(z[O],s.props)===I)return z.splice(O,1),!0;const A=re(z[O],s.props);if(A.length>0&&f(A,I))return!0}return!1};f(a.value,n),m()},append:(n,l)=>{if(l===void 0)a.value.push(n);else{const f=we(a.value,l,s.props);if(f){const I=(s.props||{}).children||"children";f[I]||(f[I]=[]),f[I].push(n)}}m()},insertBefore:(n,l)=>{const f=(z,I,O)=>{for(let A=0;A<z.length;A++){if(q(z[A],s.props)===I)return z.splice(A,0,O),!0;const F=re(z[A],s.props);if(F.length>0&&f(F,I,O))return!0}return!1};f(a.value,l,n),m()},insertAfter:(n,l)=>{const f=(z,I,O)=>{for(let A=0;A<z.length;A++){if(q(z[A],s.props)===I)return z.splice(A+1,0,O),!0;const F=re(z[A],s.props);if(F.length>0&&f(F,I,O))return!0}return!1};f(a.value,l,n),m()},updateKeyChildren:(n,l)=>{const f=we(a.value,n,s.props);if(f){const I=(s.props||{}).children||"children";f[I]=l,m()}}}),(n,l)=>(B(),se("div",{class:"vue-virtual-tree",style:Ne({height:typeof e.height=="number"?`${e.height}px`:e.height}),onClick:R},[ae(h).length>0?(B(),de(ae(Ee),{key:0,ref_key:"dynamicScrollerRef",ref:x,items:ae(h),"min-item-size":e.itemSize||32,class:"vue-virtual-tree__scroller"},{default:Z(({item:f,index:z,active:I})=>[Me(ae(Ye),{item:f,active:I,"data-index":z,class:"vue-virtual-tree__item"},{default:Z(()=>{var O,A,F;return[(B(),de(Jt,{node:f,key:f.id,props:s.props,"show-checkbox":e.showCheckbox,"expand-on-click-node":e.expandOnClickNode,draggable:e.draggable,indent:s.indent,"drop-type":((A=(O=ae(y).dropNode)==null?void 0:O.value)==null?void 0:A.id)===f.id?((F=ae(y).dropType)==null?void 0:F.value)??null:null,onDragStart:w,onDragEnter:P,onDragLeave:ne,onDragOver:le,onDragEnd:ue,onDrop:te},{default:Z(({node:Y,data:M})=>[U(n.$slots,"default",{node:Y,data:M},void 0,!0)]),loading:Z(({node:Y,data:M})=>[U(n.$slots,"loading",{node:Y,data:M},()=>[l[0]||(l[0]=H("svg",{class:"vue-virtual-tree-node__loading-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[H("g",{transform:"translate(12,12)"},[H("circle",{cx:"0",cy:"0",r:"8",fill:"none",stroke:"currentColor","stroke-width":"1",opacity:"0.2"}),H("g",{class:"vue-virtual-tree-loading-dots"},[H("circle",{cx:"0",cy:"-8",r:"2",fill:"currentColor"}),H("circle",{cx:"6.928",cy:"-4",r:"2",fill:"currentColor",opacity:"0.7"}),H("circle",{cx:"6.928",cy:"4",r:"2",fill:"currentColor",opacity:"0.4"})])])],-1))],!0)]),icon:Z(({node:Y,data:M})=>[U(n.$slots,"icon",{node:Y,data:M},()=>[H("span",si,[Y.isLeaf?be("",!0):(B(),se("svg",ri,[...l[1]||(l[1]=[H("path",{d:"M384 384l256 256-256 256z",fill:"currentColor"},null,-1)])]))])],!0)]),_:3},8,["node","props","show-checkbox","expand-on-click-node","draggable","indent","drop-type"]))]}),_:2},1032,["item","active","data-index"])]),_:3},8,["items","min-item-size"])):(B(),se("div",ni,[U(n.$slots,"empty",{},()=>[l[2]||(l[2]=H("span",null,"暂无数据",-1))],!0)]))],4))}}),ai=Je(li,[["__scopeId","data-v-f8ae782f"]]);export{ai as V,Je as _};
